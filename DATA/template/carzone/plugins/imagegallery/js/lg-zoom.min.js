(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.LgZoom=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){(function(j,h){if(typeof d==="function"&&d.amd){d([],h)}else{if(typeof e!=="undefined"){h()}else{var i={exports:{}};h();j.lgZoom=i.exports}}})(this,function(){var i=Object.assign||function(o){for(var m=1;m<arguments.length;m++){var n=arguments[m];for(var l in n){if(Object.prototype.hasOwnProperty.call(n,l)){o[l]=n[l]}}}return o};var k=function k(){var l=false;var m=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(m&&parseInt(m[2],10)<54){l=true}return l};var j={scale:1,zoom:true,actualSize:true,enableZoomAfter:300,useLeftForZoom:k()};var h=function h(l){this.el=l;this.core=window.lgData[this.el.getAttribute("lg-uid")];this.core.s=i({},j,this.core.s);if(this.core.s.zoom&&this.core.doCss()){this.init();this.zoomabletimeout=false;this.pageX=window.innerWidth/2;this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)}return this};h.prototype.init=function(){var r=this;var m='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';if(r.core.s.actualSize){m+='<span id="lg-actual-size" class="lg-icon"></span>'}if(r.core.s.useLeftForZoom){utils.addClass(r.core.outer,"lg-use-left-for-zoom")}else{utils.addClass(r.core.outer,"lg-use-transition-for-zoom")}this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",m);utils.on(r.core.el,"onSlideItemLoad.lgtmzoom",function(t){var s=r.core.s.enableZoomAfter+t.detail.delay;if(utils.hasClass(document.body,"lg-from-hash")&&t.detail.delay){s=0}else{utils.removeClass(document.body,"lg-from-hash")}r.zoomabletimeout=setTimeout(function(){utils.addClass(r.core.___slide[t.detail.index],"lg-zoomable")},s+30)});var q=1;var p=function p(w){var z=r.core.outer.querySelector(".lg-current .lg-image");var v;var u;var t=(window.innerWidth-z.clientWidth)/2;var B=(window.innerHeight-z.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop);v=r.pageX-t;u=r.pageY-B;var s=(w-1)*v;var A=(w-1)*u;utils.setVendor(z,"Transform","scale3d("+w+", "+w+", 1)");z.setAttribute("data-scale",w);if(r.core.s.useLeftForZoom){z.parentElement.style.left=-s+"px";z.parentElement.style.top=-A+"px"}else{utils.setVendor(z.parentElement,"Transform","translate3d(-"+s+"px, -"+A+"px, 0)")}z.parentElement.setAttribute("data-x",s);z.parentElement.setAttribute("data-y",A)};var l=function l(){if(q>1){utils.addClass(r.core.outer,"lg-zoomed")}else{r.resetZoom()}if(q<1){q=1}p(q)};var o=function o(y,z,u,x){var t=z.clientWidth;var s;if(r.core.s.dynamic){s=r.core.s.dynamicEl[u].width||z.naturalWidth||t}else{s=r.core.items[u].getAttribute("data-width")||z.naturalWidth||t}var v;if(utils.hasClass(r.core.outer,"lg-zoomed")){q=1}else{if(s>t){v=s/t;q=v||2}}if(x){r.pageX=window.innerWidth/2;r.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)}else{r.pageX=y.pageX||y.targetTouches[0].pageX;r.pageY=y.pageY||y.targetTouches[0].pageY}l();setTimeout(function(){utils.removeClass(r.core.outer,"lg-grabbing");utils.addClass(r.core.outer,"lg-grab")},10)};var n=false;utils.on(r.core.el,"onAferAppendSlide.lgtmzoom",function(t){var s=t.detail.index;var u=r.core.___slide[s].querySelector(".lg-image");if(!r.core.isTouch){utils.on(u,"dblclick",function(v){o(v,u,s)})}if(r.core.isTouch){utils.on(u,"touchstart",function(v){if(!n){n=setTimeout(function(){n=null},300)}else{clearTimeout(n);n=null;o(v,u,s)}v.preventDefault()})}});utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",function(){r.pageX=window.innerWidth/2;r.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop);p(q)});utils.on(document.getElementById("lg-zoom-out"),"click.lg",function(){if(r.core.outer.querySelector(".lg-current .lg-image")){q-=r.core.s.scale;l()}});utils.on(document.getElementById("lg-zoom-in"),"click.lg",function(){if(r.core.outer.querySelector(".lg-current .lg-image")){q+=r.core.s.scale;l()}});utils.on(document.getElementById("lg-actual-size"),"click.lg",function(s){o(s,r.core.___slide[r.core.index].querySelector(".lg-image"),r.core.index,true)});utils.on(r.core.el,"onBeforeSlide.lgtm",function(){q=1;r.resetZoom()});if(!r.core.isTouch){r.zoomDrag()}if(r.core.isTouch){r.zoomSwipe()}};h.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var m=0;m<this.core.___slide.length;m++){if(this.core.___slide[m].querySelector(".lg-img-wrap")){this.core.___slide[m].querySelector(".lg-img-wrap").removeAttribute("style");this.core.___slide[m].querySelector(".lg-img-wrap").removeAttribute("data-x");this.core.___slide[m].querySelector(".lg-img-wrap").removeAttribute("data-y")}}for(var l=0;l<this.core.___slide.length;l++){if(this.core.___slide[l].querySelector(".lg-image")){this.core.___slide[l].querySelector(".lg-image").removeAttribute("style");this.core.___slide[l].querySelector(".lg-image").removeAttribute("data-scale")}}this.pageX=window.innerWidth/2;this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)};h.prototype.zoomSwipe=function(){var r=this;var t={};var m={};var s=false;var n=false;var l=false;for(var q=0;q<r.core.___slide.length;q++){utils.on(r.core.___slide[q],"touchstart.lg",function(v){if(utils.hasClass(r.core.outer,"lg-zoomed")){var u=r.core.___slide[r.core.index].querySelector(".lg-object");l=u.offsetHeight*u.getAttribute("data-scale")>r.core.outer.querySelector(".lg").clientHeight;n=u.offsetWidth*u.getAttribute("data-scale")>r.core.outer.querySelector(".lg").clientWidth;if(n||l){v.preventDefault();t={x:v.targetTouches[0].pageX,y:v.targetTouches[0].pageY}}}})}for(var p=0;p<r.core.___slide.length;p++){utils.on(r.core.___slide[p],"touchmove.lg",function(w){if(utils.hasClass(r.core.outer,"lg-zoomed")){var x=r.core.___slide[r.core.index].querySelector(".lg-img-wrap");var v;var u;w.preventDefault();s=true;m={x:w.targetTouches[0].pageX,y:w.targetTouches[0].pageY};utils.addClass(r.core.outer,"lg-zoom-dragging");if(l){u=-Math.abs(x.getAttribute("data-y"))+(m.y-t.y)}else{u=-Math.abs(x.getAttribute("data-y"))}if(n){v=-Math.abs(x.getAttribute("data-x"))+(m.x-t.x)}else{v=-Math.abs(x.getAttribute("data-x"))}if(Math.abs(m.x-t.x)>15||Math.abs(m.y-t.y)>15){if(r.core.s.useLeftForZoom){x.style.left=v+"px";x.style.top=u+"px"}else{utils.setVendor(x,"Transform","translate3d("+v+"px, "+u+"px, 0)")}}}})}for(var o=0;o<r.core.___slide.length;o++){utils.on(r.core.___slide[o],"touchend.lg",function(){if(utils.hasClass(r.core.outer,"lg-zoomed")){if(s){s=false;utils.removeClass(r.core.outer,"lg-zoom-dragging");r.touchendZoom(t,m,n,l)}}})}};h.prototype.zoomDrag=function(){var s=this;var q={};var n={};var m=false;var p=false;var l=false;var r=false;for(var o=0;o<s.core.___slide.length;o++){utils.on(s.core.___slide[o],"mousedown.lgzoom",function(u){var t=s.core.___slide[s.core.index].querySelector(".lg-object");r=t.offsetHeight*t.getAttribute("data-scale")>s.core.outer.querySelector(".lg").clientHeight;l=t.offsetWidth*t.getAttribute("data-scale")>s.core.outer.querySelector(".lg").clientWidth;if(utils.hasClass(s.core.outer,"lg-zoomed")){if(utils.hasClass(u.target,"lg-object")&&(l||r)){u.preventDefault();q={x:u.pageX,y:u.pageY};m=true;s.core.outer.scrollLeft+=1;s.core.outer.scrollLeft-=1;utils.removeClass(s.core.outer,"lg-grab");utils.addClass(s.core.outer,"lg-grabbing")}}})}utils.on(window,"mousemove.lgzoom",function(v){if(m){var w=s.core.___slide[s.core.index].querySelector(".lg-img-wrap");var u;var t;p=true;n={x:v.pageX,y:v.pageY};utils.addClass(s.core.outer,"lg-zoom-dragging");if(r){t=-Math.abs(w.getAttribute("data-y"))+(n.y-q.y)}else{t=-Math.abs(w.getAttribute("data-y"))}if(l){u=-Math.abs(w.getAttribute("data-x"))+(n.x-q.x)}else{u=-Math.abs(w.getAttribute("data-x"))}if(s.core.s.useLeftForZoom){w.style.left=u+"px";w.style.top=t+"px"}else{utils.setVendor(w,"Transform","translate3d("+u+"px, "+t+"px, 0)")}}});utils.on(window,"mouseup.lgzoom",function(t){if(m){m=false;utils.removeClass(s.core.outer,"lg-zoom-dragging");if(p&&(q.x!==n.x||q.y!==n.y)){n={x:t.pageX,y:t.pageY};s.touchendZoom(q,n,l,r)}p=false}utils.removeClass(s.core.outer,"lg-grabbing");utils.addClass(s.core.outer,"lg-grab")})};h.prototype.touchendZoom=function(u,o,p,n){var t=this;var v=t.core.___slide[t.core.index].querySelector(".lg-img-wrap");var s=t.core.___slide[t.core.index].querySelector(".lg-object");var x=-Math.abs(v.getAttribute("data-x"))+(o.x-u.x);var w=-Math.abs(v.getAttribute("data-y"))+(o.y-u.y);var q=(t.core.outer.querySelector(".lg").clientHeight-s.offsetHeight)/2;var l=Math.abs(s.offsetHeight*Math.abs(s.getAttribute("data-scale"))-t.core.outer.querySelector(".lg").clientHeight+q);var r=(t.core.outer.querySelector(".lg").clientWidth-s.offsetWidth)/2;var m=Math.abs(s.offsetWidth*Math.abs(s.getAttribute("data-scale"))-t.core.outer.querySelector(".lg").clientWidth+r);if(Math.abs(o.x-u.x)>15||Math.abs(o.y-u.y)>15){if(n){if(w<=-l){w=-l}else{if(w>=-q){w=-q}}}if(p){if(x<=-m){x=-m}else{if(x>=-r){x=-r}}}if(n){v.setAttribute("data-y",Math.abs(w))}else{w=-Math.abs(v.getAttribute("data-y"))}if(p){v.setAttribute("data-x",Math.abs(x))}else{x=-Math.abs(v.getAttribute("data-x"))}if(t.core.s.useLeftForZoom){v.style.left=x+"px";v.style.top=w+"px"}else{utils.setVendor(v,"Transform","translate3d("+x+"px, "+w+"px, 0)")}}};h.prototype.destroy=function(){var m=this;utils.off(m.core.el,".lgzoom");utils.off(window,".lgzoom");for(var l=0;l<m.core.___slide.length;l++){utils.off(m.core.___slide[l],".lgzoom")}utils.off(m.core.el,".lgtmzoom");m.resetZoom();clearTimeout(m.zoomabletimeout);m.zoomabletimeout=false};window.lgModules.zoom=h})},{}]},{},[1])(1)});