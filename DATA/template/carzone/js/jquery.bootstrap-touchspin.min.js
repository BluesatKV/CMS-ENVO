!function(a){function c(e,f){return e+".touchspin_"+f}function d(f,e){return a.map(f,function(g){return c(g,e)})}var b=0;a.fn.TouchSpin=function(h){if("destroy"===h){return void this.each(function(){var i=a(this),e=i.data();a(document).off(d(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],e.spinnerid).join(" "))})}var g={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},f={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function al(){if(!U.data("alreadyinitialized")){if(U.data("alreadyinitialized",!0),b+=1,U.data("spinnerid",b),!U.is("input")){return void console.log("Must be an input.")}X(),R(),K(),ai(),af(),L(),ab(),J(),n.input.css("display","block")}}function R(){""!==s.initval&&""===U.val()&&U.val(s.initval)}function aa(j){ac(j),K();var k=n.input.val();""!==k&&(k=Number(n.input.val()),n.input.val(k.toFixed(s.decimals)))}function X(){s=a.extend({},g,t,aj(),h)}function aj(){var j={};return a.each(f,function(k,m){var l="bts-"+m;U.is("[data-"+l+"]")&&(j[k]=U.data(l))}),j}function ac(j){s=a.extend({},s,j)}function ai(){var j=U.val(),k=U.parent();""!==j&&(j=Number(j).toFixed(s.decimals)),U.data("initvalue",j).val(j),U.addClass("form-control"),k.hasClass("input-group")?ah(k):ak()}function ah(r){r.addClass("bootstrap-touchspin");var v,m,p=U.prev(),l=U.next(),j='<span class="input-group-addon bootstrap-touchspin-prefix">'+s.prefix+"</span>",k='<span class="input-group-addon bootstrap-touchspin-postfix">'+s.postfix+"</span>";p.hasClass("input-group-btn")?(v='<button class="'+s.buttondown_class+' bootstrap-touchspin-down" type="button">'+s.buttondown_txt+"</button>",p.append(v)):(v='<span class="input-group-btn"><button class="'+s.buttondown_class+' bootstrap-touchspin-down" type="button">'+s.buttondown_txt+"</button></span>",a(v).insertBefore(U)),l.hasClass("input-group-btn")?(m='<button class="'+s.buttonup_class+' bootstrap-touchspin-up" type="button">'+s.buttonup_txt+"</button>",l.prepend(m)):(m='<span class="input-group-btn"><button class="'+s.buttonup_class+' bootstrap-touchspin-up" type="button">'+s.buttonup_txt+"</button></span>",a(m).insertAfter(U)),a(j).insertBefore(U),a(k).insertAfter(U),q=r}function ak(){var j;j=s.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+s.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+s.postfix+'</span><span class="input-group-btn-vertical"><button class="'+s.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+s.verticalupclass+'"></i></button><button class="'+s.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+s.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+s.buttondown_class+' bootstrap-touchspin-down" type="button">'+s.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+s.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+s.postfix+'</span><span class="input-group-btn"><button class="'+s.buttonup_class+' bootstrap-touchspin-up" type="button">'+s.buttonup_txt+"</button></span></div>",q=a(j).insertBefore(U),a(".bootstrap-touchspin-prefix",q).after(U),U.hasClass("input-sm")?q.addClass("input-group-sm"):U.hasClass("input-lg")&&q.addClass("input-group-lg")}function af(){n={down:a(".bootstrap-touchspin-down",q),up:a(".bootstrap-touchspin-up",q),input:a("input",q),prefix:a(".bootstrap-touchspin-prefix",q).addClass(s.prefix_extraclass),postfix:a(".bootstrap-touchspin-postfix",q).addClass(s.postfix_extraclass)}}function L(){""===s.prefix&&n.prefix.hide(),""===s.postfix&&n.postfix.hide()}function ab(){U.on("keydown",function(j){var k=j.keyCode||j.which;38===k?("up"!==o&&(am(),ad()),j.preventDefault()):40===k&&("down"!==o&&(W(),V()),j.preventDefault())}),U.on("keyup",function(j){var k=j.keyCode||j.which;38===k?Q():40===k&&Q()}),U.on("blur",function(){K()}),n.down.on("keydown",function(j){var k=j.keyCode||j.which;(32===k||13===k)&&("down"!==o&&(W(),V()),j.preventDefault())}),n.down.on("keyup",function(j){var k=j.keyCode||j.which;(32===k||13===k)&&Q()}),n.up.on("keydown",function(j){var k=j.keyCode||j.which;(32===k||13===k)&&("up"!==o&&(am(),ad()),j.preventDefault())}),n.up.on("keyup",function(j){var k=j.keyCode||j.which;(32===k||13===k)&&Q()}),n.down.on("mousedown.touchspin",function(j){n.down.off("touchstart.touchspin"),U.is(":disabled")||(W(),V(),j.preventDefault(),j.stopPropagation())}),n.down.on("touchstart.touchspin",function(j){n.down.off("mousedown.touchspin"),U.is(":disabled")||(W(),V(),j.preventDefault(),j.stopPropagation())}),n.up.on("mousedown.touchspin",function(j){n.up.off("touchstart.touchspin"),U.is(":disabled")||(am(),ad(),j.preventDefault(),j.stopPropagation())}),n.up.on("touchstart.touchspin",function(j){n.up.off("mousedown.touchspin"),U.is(":disabled")||(am(),ad(),j.preventDefault(),j.stopPropagation())}),n.up.on("mouseout touchleave touchend touchcancel",function(j){o&&(j.stopPropagation(),Q())}),n.down.on("mouseout touchleave touchend touchcancel",function(j){o&&(j.stopPropagation(),Q())}),n.down.on("mousemove touchmove",function(j){o&&(j.stopPropagation(),j.preventDefault())}),n.up.on("mousemove touchmove",function(j){o&&(j.stopPropagation(),j.preventDefault())}),a(document).on(d(["mouseup","touchend","touchcancel"],b).join(" "),function(j){o&&(j.preventDefault(),Q())}),a(document).on(d(["mousemove","touchmove","scroll","scrollstart"],b).join(" "),function(j){o&&(j.preventDefault(),Q())}),U.on("mousewheel DOMMouseScroll",function(j){if(s.mousewheel&&U.is(":focus")){var k=j.originalEvent.wheelDelta||-j.originalEvent.deltaY||-j.originalEvent.detail;j.stopPropagation(),j.preventDefault(),0>k?W():am()}})}function J(){U.on("touchspin.uponce",function(){Q(),am()}),U.on("touchspin.downonce",function(){Q(),W()}),U.on("touchspin.startupspin",function(){ad()}),U.on("touchspin.startdownspin",function(){V()}),U.on("touchspin.stopspin",function(){Q()}),U.on("touchspin.updatesettings",function(j,k){aa(k)})}function ag(j){switch(s.forcestepdivisibility){case"round":return(Math.round(j/s.step)*s.step).toFixed(s.decimals);case"floor":return(Math.floor(j/s.step)*s.step).toFixed(s.decimals);case"ceil":return(Math.ceil(j/s.step)*s.step).toFixed(s.decimals);default:return j}}function K(){var j,k,l;return j=U.val(),""===j?void (""!==s.replacementval&&(U.val(s.replacementval),U.trigger("change"))):void (s.decimals>0&&"."===j||(k=parseFloat(j),isNaN(k)&&(k=""!==s.replacementval?s.replacementval:0),l=k,k.toString()!==j&&(l=k),k<s.min&&(l=s.min),k>s.max&&(l=s.max),l=ag(l),Number(j).toString()!==l.toString()&&(U.val(l),U.trigger("change"))))}function G(){if(s.booster){var j=Math.pow(2,Math.floor(Z/s.boostat))*s.step;return s.maxboostedstep&&j>s.maxboostedstep&&(j=s.maxboostedstep,i=Math.round(i/j)*j),Math.max(s.step,j)}return s.step}function am(){K(),i=parseFloat(n.input.val()),isNaN(i)&&(i=0);var j=i,k=G();i+=k,i>s.max&&(i=s.max,U.trigger("touchspin.on.max"),Q()),n.input.val(Number(i).toFixed(s.decimals)),j!==i&&U.trigger("change")}function W(){K(),i=parseFloat(n.input.val()),isNaN(i)&&(i=0);var j=i,k=G();i-=k,i<s.min&&(i=s.min,U.trigger("touchspin.on.min"),Q()),n.input.val(i.toFixed(s.decimals)),j!==i&&U.trigger("change")}function V(){Q(),Z=0,o="down",U.trigger("touchspin.on.startspin"),U.trigger("touchspin.on.startdownspin"),H=setTimeout(function(){e=setInterval(function(){Z++,W()},s.stepinterval)},s.stepintervaldelay)}function ad(){Q(),Z=0,o="up",U.trigger("touchspin.on.startspin"),U.trigger("touchspin.on.startupspin"),Y=setTimeout(function(){ae=setInterval(function(){Z++,am()},s.stepinterval)},s.stepintervaldelay)}function Q(){switch(clearTimeout(H),clearTimeout(Y),clearInterval(e),clearInterval(ae),o){case"up":U.trigger("touchspin.on.stopupspin"),U.trigger("touchspin.on.stopspin");break;case"down":U.trigger("touchspin.on.stopdownspin"),U.trigger("touchspin.on.stopspin")}Z=0,o=!1}var s,q,n,i,e,ae,H,Y,U=a(this),t=U.data(),Z=0,o=!1;al()})}}(jQuery);