var jslangdata=JSON.parse(envoWeb.envo_jslang);(function($){$("#selectTrans").SumoSelect({placeholder:jslangdata.btnplaceholder1,captionFormat:"{0} "+jslangdata.captionformat,captionFormatAllSelected:"{0} - "+jslangdata.captionformatall,locale:[jslangdata.locale1,jslangdata.locale2,jslangdata.locale3],selectAll:true});$("#selectChannel").SumoSelect({placeholder:jslangdata.btnplaceholder2,captionFormat:"{0} "+jslangdata.captionformat,captionFormatAllSelected:"{0} - "+jslangdata.captionformatall,locale:[jslangdata.locale1,jslangdata.locale2,jslangdata.locale3],selectAll:true});$("#selectTrans").on("change",function(){var transID=$(this).val();if(transID){$.ajax({url:"/plugins/tv_tower/ajax/selectchannel.php",type:"POST",datatype:"json",data:{transId:transID},success:function(data){var $select=$("#selectChannel");$select.empty();var res=$.parseJSON(data);$.each(res,function(key,data){var $optgroup=$("<optgroup>",{label:key});$optgroup.appendTo($select);$.each(data,function(key,data){$.each(data,function(index,data){var $option=$("<option>",{text:data["channelnumber"]+" K",value:data["towerid"]+","+data["channelid"]+","+data["channelnumber"]});$option.appendTo($optgroup)})})});$("#selectChannel")[0].sumo.reload()}})}else{$("#selectChannel").html("");$("#selectChannel")[0].sumo.reload()}});$("#searchprogram").click(function(){var channelIDs=$("#selectChannel").val();if(channelIDs){$("#resultData").empty();$("#bounceLoader").show();$.ajax({url:"/plugins/tv_tower/ajax/selectchannel2.php",type:"POST",datatype:"html",data:{channelIDs:channelIDs},success:function(data){setTimeout(function(){$("#bounceLoader").hide();$("#resultData").append(data)},1500)}})}else{$("#resultData").html('<div class="alert alert-danger">Vyberte kanál ze seznamu kanálů</div>')}});$("#exportprogram").click(function(){var channelIDs=$("#selectChannel").val();if(channelIDs){$("#resultData").empty();$("#bounceLoader").show();$.ajax({url:"/plugins/tv_tower/pdf_programlist_ajax.php",type:"POST",dataType:"json",data:{channelIDs:channelIDs},success:function(response){setTimeout(function(){$("#bounceLoader").hide();if(response.URL){$("#resultData").html("Export seznamu programů do PDF proběhl úspěšně");window.location=response.URL}else{$("#resultData").html(response.ERROR)}},1500)}})}else{$("#resultData").html('<div class="alert alert-danger">Vyberte kanál ze seznamu kanálů</div>')}})})(jQuery);(function($){$('[data-toggle="popover"]').popover({html:true,trigger:"hover",placement:"top",container:"body"});$(".sumoselect").SumoSelect();$(".table-expandable").each(function(){var table=$(this);if(table.children("tbody").children("tr").hasClass("noresult")){}else{table.children("thead").children("tr").append("<th></th>");table.children("tbody").children("tr").filter(":odd").hide();table.children("tbody").children("tr").filter(":even").click(function(){var element=$(this);element.toggleClass("active");element.next("tr").toggle("fast");element.find(".table-expandable-arrow").toggleClass("up")});table.children("tbody").children("tr").filter(":even").each(function(){var element=$(this);element.append('<td><div class="table-expandable-arrow"></div></td>')})}});$('select[id^="SelectTrans"]').on("change",function(){var val=$(this).find("option:selected").val();var parentel=$(this).parents('div[id^="tramsmitter-"]');console.log(parentel);parentel.find('div[id^="Transmitter"] table tbody tr').show();$(".table-expandable").each(function(){var table=$(this);table.children("tbody").children("tr").filter(":odd").hide()});if(val){parentel.find('div[id^="Transmitter"] table tbody tr').not($('tbody tr[data-mux="'+val+'"]')).hide();$(".table-expandable").each(function(){var table=$(this);table.children("tbody").children("tr").filter(":odd").hide();table.find(".table-expandable-arrow").removeClass("up");table.find(".active").removeClass("active")})}})})(jQuery);