$(document).ready(function(){$('input[name="files"]').fileuploader({limit:1,onSelect:function(a){if(!a.html.find(".fileuploader-action-start").length){a.html.find(".fileuploader-action-remove").before('<a class="fileuploader-action fileuploader-action-start" title="Upload"><i></i></a>')}},upload:{url:"php/ajax_upload_file.php",data:null,type:"POST",enctype:"multipart/form-data",start:false,synchron:true,beforeSend:function(b){var a=$("#custom_file_name");if(a.length){b.upload.data.custom_name=a.val()}a.val("")},onSuccess:function(a,b){var c={};try{c=JSON.parse(a)}catch(d){c.hasWarnings=true}if(c.isSuccess&&c.files[0]){b.name=c.files[0].name;b.html.find(".column-title div").animate({opacity:0},400)}b.html.find(".fileuploader-action-remove").addClass("fileuploader-action-success");setTimeout(function(){b.html.find(".column-title div").attr("title",b.name).text(b.name).animate({opacity:1},400);b.html.find(".progress-bar2").fadeOut(400)},400)},onError:function(a){var b=a.html.find(".progress-bar2");if(b.length>0){b.find("span").html(0+"%");b.find(".fileuploader-progressbar .bar").width(0+"%");a.html.find(".progress-bar2").fadeOut(400)}a.upload.status!="cancelled"&&a.html.find(".fileuploader-action-retry").length==0?a.html.find(".column-actions").prepend('<a class="fileuploader-action fileuploader-action-retry" title="Retry"><i></i></a>'):null},onProgress:function(b,a){var c=a.html.find(".progress-bar2");if(c.length>0){c.show();c.find("span").html(b.percentage+"%");c.find(".fileuploader-progressbar .bar").width(b.percentage+"%")}},onComplete:null},onRemove:function(a){$.post("./php/ajax_remove_file.php",{file:a.name})}})});