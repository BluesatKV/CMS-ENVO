(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){var b=function(i){var j=i.each,d=i.extend,e=i.isArray,h=i.isObject,c=i.isNumber,m=i.merge,f=i.pick,g=i.reduce;return{getColor:function(K,J){var H=J.index,E=J.mapOptionsToLevel,x=J.parentColor,G=J.parentColorIndex,I=J.series,F=J.colors,s=J.siblings,A=I.points,C,p,w,o;if(K){A=A[K.i];K=E[K.level]||{};if(C=A&&K.colorByPoint){w=A.index%(F?F.length:I.chart.options.chart.colorCount),p=F&&F[w]}F=A&&A.options.color;C=K&&K.color;if(E=x){E=(E=K&&K.colorVariation)&&"brightness"===E.key?i.color(x).brighten(H/s*E.to).get():x}C=f(F,C,p,E,I.color);o=f(A&&A.options.colorIndex,K&&K.colorIndex,w,G,J.colorIndex)}return{color:C,colorIndex:o}},getLevelOptions:function(k){var n=null,r,p,o,q;if(h(k)){for(n={},o=c(k.from)?k.from:1,q=k.levels,p={},r=h(k.defaults)?k.defaults:{},e(q)&&(p=g(q,function(s,v){var u,t;h(v)&&c(v.level)&&(t=m({},v),u="boolean"===typeof t.levelIsConstant?t.levelIsConstant:r.levelIsConstant,delete t.levelIsConstant,delete t.level,v=v.level+(u?0:o-1),h(s[v])?d(s[v],t):s[v]=t);return s},{})),q=c(k.to)?k.to:1,k=0;k<=q;k++){n[k]=m({},r,h(p[k])?p[k]:{})}}return n},setTreeValues:function l(z,v){var s=v.before,u=v.idRoot,x=v.mapIdToNode[u],w=v.points[z.i],p=w&&w.options||{},t=0,o=[];d(z,{levelDynamic:z.level-(("boolean"===typeof v.levelIsConstant?v.levelIsConstant:1)?0:x.level),name:f(w&&w.name,""),visible:u===z.id||("boolean"===typeof v.visible?v.visible:!1)});"function"===typeof s&&(z=s(z,v));j(z.children,function(r,y){var q=d({},v);d(q,{index:y,siblings:z.children.length,visible:z.visible});r=l(r,q);o.push(r);r.visible&&(t+=r.val)});z.visible=0<t||z.visible;s=f(p.value,t);d(z,{children:o,childrenTotal:t,isLeaf:z.visible&&!t,val:s});return z},updateRootId:function(k){var o;h(k)&&(o=h(k.options)?k.options:{},o=f(k.rootNode,o.rootId,""),h(k.userOptions)&&(k.userOptions.rootId=o),k.rootNode=o);return o}}}(a);(function(U,i){var K=U.seriesType,N=U.seriesTypes,R=U.map,L=U.merge,s=U.extend,O=U.noop,P=U.each,w=i.getColor,p=i.getLevelOptions,f=U.grep,S=U.isNumber,o=U.isObject,c=U.isString,m=U.pick,T=U.Series,j=U.stableSort,Q=U.Color,h=function(e,k,g){g=g||this;U.objectEach(e,function(l,n){k.call(g,l,n,e)})},G=U.reduce,M=function(e,k,g){g=g||this;e=k.call(g,e);!1!==e&&M(e,k,g)},d=i.updateRootId;K("treemap","scatter",{showInLegend:!1,marker:!1,colorByPoint:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:"",pointFormat:"\x3cb\x3e{point.name}\x3c/b\x3e: {point.value}\x3cbr/\x3e"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,opacity:0.15,states:{hover:{borderColor:"#999999",brightness:N.heatmap?0:0.1,halo:!1,opacity:0.75,shadow:!1}}},{pointArrayMap:["value"],axisTypes:N.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],directTouch:!0,optionalAxis:"colorAxis",getSymbol:O,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:N.heatmap&&N.heatmap.prototype.translateColors,colorAttribs:N.heatmap&&N.heatmap.prototype.colorAttribs,trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(e,g){e=G(e||[],function(l,n,k){n=m(n.parent,"");void 0===l[n]&&(l[n]=[]);l[n].push(k);return l},{});h(e,function(l,k,n){""!==k&&-1===U.inArray(k,g)&&(P(l,function(q){n[""].push(q)}),delete n[k])});return e},getTree:function(){var e=R(this.data,function(g){return g.id}),e=this.getListOfParents(this.data,e);this.nodeMap=[];return this.buildNode("",-1,0,e,null)},init:function(e,g){T.prototype.init.call(this,e,g);this.options.allowDrillToNode&&U.addEvent(this,"click",this.onClickDrillToNode)},buildNode:function(v,t,r,u,n){var g=this,k=[],l=g.points[t],x=0,q;P(u[v]||[],function(e){q=g.buildNode(g.points[e].id,e,r+1,u,v);x=Math.max(q.height+1,x);k.push(q)});t={id:v,i:t,children:k,height:x,level:r,parent:n,visible:!1};g.nodeMap[t.id]=t;l&&(l.node=t);return t},setTreeValues:function(k){var u=this,t=u.options,g=u.nodeMap[u.rootNode],t="boolean"===typeof t.levelIsConstant?t.levelIsConstant:!0,n=0,r=[],q,l=u.points[k.i];P(k.children,function(e){e=u.setTreeValues(e);r.push(e);e.ignore||(n+=e.val)});j(r,function(e,v){return e.sortIndex-v.sortIndex});q=m(l&&l.options.value,n);l&&(l.value=q);s(k,{children:r,childrenTotal:n,ignore:!(m(l&&l.visible,!0)&&0<q),isLeaf:k.visible&&!n,levelDynamic:k.level-(t?0:g.level),name:m(l&&l.name,""),sortIndex:m(l&&l.sortIndex,-q),val:q});return k},calculateChildrenAreas:function(k,u){var t=this,g=t.options,n=t.mapOptionsToLevel[k.level+1],r=m(t[n&&n.layoutAlgorithm]&&n.layoutAlgorithm,g.layoutAlgorithm),q=g.alternateStartingDirection,l=[];k=f(k.children,function(e){return !e.ignore});n&&n.layoutStartingDirection&&(u.direction="vertical"===n.layoutStartingDirection?0:1);l=t[r](u,k);P(k,function(v,e){e=l[e];v.values=L(e,{val:v.childrenTotal,direction:q?1-u.direction:u.direction});v.pointValues=L(e,{x:e.x/t.axisRatio,width:e.width/t.axisRatio});v.children.length&&t.calculateChildrenAreas(v,v.values)})},setPointValues:function(){var e=this,k=e.xAxis,g=e.yAxis;P(e.points,function(n){var r=n.node,u=r.pointValues,l,q,t;t=(e.pointAttribs(n)["stroke-width"]||0)%2/2;u&&r.visible?(r=Math.round(k.translate(u.x,0,0,0,1))-t,l=Math.round(k.translate(u.x+u.width,0,0,0,1))-t,q=Math.round(g.translate(u.y,0,0,0,1))-t,u=Math.round(g.translate(u.y+u.height,0,0,0,1))-t,n.shapeType="rect",n.shapeArgs={x:Math.min(r,l),y:Math.min(q,u),width:Math.abs(l-r),height:Math.abs(u-q)},n.plotX=n.shapeArgs.x+n.shapeArgs.width/2,n.plotY=n.shapeArgs.y+n.shapeArgs.height/2):(delete n.plotX,delete n.plotY)})},setColorRecursive:function(l,u,k,r,q){var t=this,g=t&&t.chart,g=g&&g.options&&g.options.colors,n;if(l){n=w(l,{colors:g,index:r,mapOptionsToLevel:t.mapOptionsToLevel,parentColor:u,parentColorIndex:k,series:t,siblings:q});if(u=t.points[l.i]){u.color=n.color,u.colorIndex=n.colorIndex}P(l.children||[],function(v,e){t.setColorRecursive(v,n.color,n.colorIndex,e,l.children.length)})}},algorithmGroup:function(k,l,g,e){this.height=k;this.width=l;this.plot=e;this.startDirection=this.direction=g;this.lH=this.nH=this.lW=this.nW=this.total=0;this.elArr=[];this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(n,q){return Math.max(n/q,q/n)}};this.addElement=function(n){this.lP.total=this.elArr[this.elArr.length-1];this.total+=n;0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH));this.elArr.push(n)};this.reset=function(){this.lW=this.nW=0;this.elArr=[];this.total=0}},algorithmCalcPoints:function(E,C,D,r){var B,A,z,y,v=D.lW,x=D.lH,F=D.plot,I,H=0,n=D.elArr.length-1;C?(v=D.nW,x=D.nH):I=D.elArr[D.elArr.length-1];P(D.elArr,function(e){if(C||H<n){0===D.direction?(B=F.x,A=F.y,z=v,y=e/z):(B=F.x,A=F.y,y=x,z=e/y),r.push({x:B,y:A,width:z,height:y}),0===D.direction?F.y+=y:F.x+=z}H+=1});D.reset();0===D.direction?D.width-=v:D.height-=x;F.y=F.parent.y+(F.parent.height-D.height);F.x=F.parent.x+(F.parent.width-D.width);E&&(D.direction=1-D.direction);C||D.addElement(I)},algorithmLowAspectRatio:function(A,z,x){var y=[],v=this,n,u={x:z.x,y:z.y,parent:z},t=0,q=x.length-1,r=new this.algorithmGroup(z.height,z.width,z.direction,u);P(x,function(e){n=e.val/z.val*z.height*z.width;r.addElement(n);r.lP.nR>r.lP.lR&&v.algorithmCalcPoints(A,!1,r,y,u);t===q&&v.algorithmCalcPoints(A,!0,r,y,u);t+=1});return y},algorithmFill:function(H,F,D){var E=[],C,x=F.direction,B=F.x,A=F.y,z=F.width,y=F.height,J,I,v,n;P(D,function(e){C=e.val/F.val*F.height*F.width;J=B;I=A;0===x?(n=y,v=C/n,z-=v,B+=v):(v=z,n=C/v,y-=n,A+=n);E.push({x:J,y:I,width:v,height:n});H&&(x=1-x)});return E},strip:function(g,e){return this.algorithmLowAspectRatio(!1,g,e)},squarified:function(g,e){return this.algorithmLowAspectRatio(!0,g,e)},sliceAndDice:function(g,e){return this.algorithmFill(!0,g,e)},stripes:function(g,e){return this.algorithmFill(!1,g,e)},translate:function(){var k=this,g=k.options,n=d(k),e,l;T.prototype.translate.call(k);l=k.tree=k.getTree();e=k.nodeMap[n];k.mapOptionsToLevel=p({from:e.level+1,levels:g.levels,to:l.height,defaults:{levelIsConstant:k.options.levelIsConstant,colorByPoint:g.colorByPoint}});""===n||e&&e.children.length||(k.drillToNode("",!1),n=k.rootNode,e=k.nodeMap[n]);M(k.nodeMap[k.rootNode],function(q){var t=!1,r=q.parent;q.visible=!0;if(r||""===r){t=k.nodeMap[r]}return t});M(k.nodeMap[k.rootNode].children,function(r){var q=!1;P(r,function(t){t.visible=!0;t.children.length&&(q=(q||[]).concat(t.children))});return q});k.setTreeValues(l);k.axisRatio=k.xAxis.len/k.yAxis.len;k.nodeMap[""].pointValues=n={x:0,y:0,width:100,height:100};k.nodeMap[""].values=n=L(n,{width:n.width*k.axisRatio,direction:"vertical"===g.layoutStartingDirection?0:1,val:l.val});k.calculateChildrenAreas(l,n);k.colorAxis?k.translateColors():g.colorByPoint||k.setColorRecursive(k.tree);g.allowDrillToNode&&(g=e.pointValues,k.xAxis.setExtremes(g.x,g.x+g.width,!1),k.yAxis.setExtremes(g.y,g.y+g.height,!1),k.xAxis.setScale(),k.yAxis.setScale());k.setPointValues()},drawDataLabels:function(){var k=this,g=k.mapOptionsToLevel,n=f(k.points,function(q){return q.node.visible}),e,l;P(n,function(q){l=g[q.node.level];e={style:{}};q.node.isLeaf||(e.enabled=!1);l&&l.dataLabels&&(e=L(e,l.dataLabels),k._hasPointLabels=!0);q.shapeArgs&&(e.style.width=q.shapeArgs.width,q.dataLabel&&q.dataLabel.css({width:q.shapeArgs.width+"px"}));q.dlOptions=L(e,q.options.dataLabels)});T.prototype.drawDataLabels.call(this)},alignDataLabel:function(e){N.column.prototype.alignDataLabel.apply(this,arguments);e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},pointAttribs:function(l,k){var t=o(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},r=l&&t[l.node.level]||{},t=this.options,q=k&&t.states[k]||{},n=l&&l.getClassName()||"";l={stroke:l&&l.borderColor||r.borderColor||q.borderColor||t.borderColor,"stroke-width":m(l&&l.borderWidth,r.borderWidth,q.borderWidth,t.borderWidth),dashstyle:l&&l.borderDashStyle||r.borderDashStyle||q.borderDashStyle||t.borderDashStyle,fill:l&&l.color||this.color};-1!==n.indexOf("highcharts-above-level")?(l.fill="none",l["stroke-width"]=0):-1!==n.indexOf("highcharts-internal-node-interactive")?(k=m(q.opacity,t.opacity),l.fill=Q(l.fill).setOpacity(k).get(),l.cursor="pointer"):-1!==n.indexOf("highcharts-internal-node")?l.fill="none":k&&(l.fill=Q(l.fill).brighten(q.brightness).get());return l},drawPoints:function(){var g=this,e=f(g.points,function(k){return k.node.visible});P(e,function(k){var l="level-group-"+k.node.levelDynamic;g[l]||(g[l]=g.chart.renderer.g(l).attr({zIndex:1000-k.node.levelDynamic}).add(g.group));k.group=g[l]});N.column.prototype.drawPoints.call(this);g.options.allowDrillToNode&&P(e,function(k){k.graphic&&(k.drillId=g.options.interactByLeaf?g.drillToByLeaf(k):g.drillToByGroup(k))})},onClickDrillToNode:function(g){var e=(g=g.point)&&g.drillId;c(e)&&(g.setState(""),this.drillToNode(e))},drillToByGroup:function(g){var e=!1;1!==g.node.level-this.nodeMap[this.rootNode].level||g.node.isLeaf||(e=g.id);return e},drillToByLeaf:function(g){var e=!1;if(g.node.parent!==this.rootNode&&g.node.isLeaf){for(g=g.node;!e;){g=this.nodeMap[g.parent],g.parent===this.rootNode&&(e=g.id)}}return e},drillUp:function(){var e=this.nodeMap[this.rootNode];e&&c(e.parent)&&this.drillToNode(e.parent)},drillToNode:function(g,e){var k=this.nodeMap[g];this.idPreviousRoot=this.rootNode;this.rootNode=g;""===g?this.drillUpButton=this.drillUpButton.destroy():this.showDrillUpButton(k&&k.name||g);this.isDirty=!0;m(e,!0)&&this.chart.redraw()},showDrillUpButton:function(k){var g=this;k=k||"\x3c Back";var q=g.options.drillUpButton,n,l;q.text&&(k=q.text);this.drillUpButton?(this.drillUpButton.placed=!1,this.drillUpButton.attr({text:k}).align()):(l=(n=q.theme)&&n.states,this.drillUpButton=this.chart.renderer.button(k,null,null,function(){g.drillUp()},n,l&&l.hover,l&&l.select).addClass("highcharts-drillup-button").attr({align:q.position.align,zIndex:7}).add().align(q.position,!1,q.relativeTo||"plotBox"))},buildKDTree:O,drawLegendSymbol:U.LegendSymbolMixin.drawRectangle,getExtremes:function(){T.prototype.getExtremes.call(this,this.colorValueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;T.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var e={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};T.prototype.bindAxes.call(this);U.extend(this.yAxis.options,e);U.extend(this.xAxis.options,e)},utils:{recursive:M,reduce:G}},{getClassName:function(){var e=U.Point.prototype.getClassName.call(this),k=this.series,g=k.options;this.node.level<=k.nodeMap[k.rootNode].level?e+=" highcharts-above-level":this.node.isLeaf||m(g.interactByLeaf,!g.allowDrillToNode)?this.node.isLeaf||(e+=" highcharts-internal-node"):e+=" highcharts-internal-node-interactive";return e},isValid:function(){return this.id||S(this.value)},setState:function(e){U.Point.prototype.setState.call(this,e);this.graphic&&this.graphic.attr({zIndex:"hover"===e?1:0})},setVisible:N.pie.prototype.pointClass.prototype.setVisible})})(a,b)});