(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(k){var g=k.hasTouch,l=k.merge,q=k.wrap,d=k.each,j=k.isNumber,h=k.addEvent,p=k.relativeLength,i=k.objectEach,c=k.Axis,o=k.Pointer;l(!0,c.prototype.defaultYAxisOptions,{minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,cursor:"ns-resize",lineColor:"#cccccc",lineDashStyle:"Solid",lineWidth:4,x:0,y:0}});k.AxisResizer=function(b){this.init(b)};k.AxisResizer.prototype={init:function(b,e){this.axis=b;this.options=b.options.resize;this.render();e||this.addMouseEvents()},render:function(){var n=this.axis,u=n.chart,t=this.options,f=t.x,s=t.y,r=Math.min(Math.max(n.top+n.height+s,u.plotTop),u.plotTop+u.plotHeight),m;m={cursor:t.cursor,stroke:t.lineColor,"stroke-width":t.lineWidth,dashstyle:t.lineDashStyle};this.lastPos=r-s;this.controlLine||(this.controlLine=u.renderer.path().addClass("highcharts-axis-resizer"));this.controlLine.add(n.axisGroup);m.d=u.renderer.crispLine(["M",n.left+f,r,"L",n.left+n.width+f,r],t.lineWidth);this.controlLine.attr(m)},addMouseEvents:function(){var m=this,u=m.controlLine.element,s=m.axis.chart.container,e=[],r,n,f;m.mouseMoveHandler=r=function(b){m.onMouseMove(b)};m.mouseUpHandler=n=function(b){m.onMouseUp(b)};m.mouseDownHandler=f=function(b){m.onMouseDown(b)};e.push(h(s,"mousemove",r),h(s.ownerDocument,"mouseup",n),h(u,"mousedown",f));g&&e.push(h(s,"touchmove",r),h(s.ownerDocument,"touchend",n),h(u,"touchstart",f));m.eventsToUnbind=e},onMouseMove:function(b){b.touches&&0===b.touches[0].pageX||!this.grabbed||(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(b).chartY-this.options.y))},onMouseUp:function(b){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(b).chartY-this.options.y);this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},onMouseDown:function(){this.axis.chart.pointer.reset(!1,0);this.grabbed=this.axis.chart.activeResizer=!0},updateAxes:function(A){var z=this,y=z.axis.chart,x=z.options.controlledAxis,w=0===x.next.length?[k.inArray(z.axis,y.yAxis)+1]:x.next,x=[z.axis].concat(x.prev),v=[],u=!1,t=y.plotTop,m=y.plotHeight,b=t+m,s;A=Math.max(Math.min(A,b),t);s=A-z.lastPos;1>s*s||(d([x,w],function(f,n){d(f,function(r,B){var C=(r=j(r)?y.yAxis[r]:n||B?y.get(r):r)&&r.options,D,e;C&&"navigator-y-axis"!==C.id&&(B=r.top,e=Math.round(p(C.minLength,m)),D=Math.round(p(C.maxLength,m)),n?(s=A-z.lastPos,C=Math.round(Math.min(Math.max(r.len-s,e),D)),B=r.top+s,B+C>b&&(D=b-C-B,A+=D,B+=D),B<t&&(B=t,B+C>b&&(C=m)),C===e&&(u=!0),v.push({axis:r,options:{top:Math.round(B),height:C}})):(C=Math.round(Math.min(Math.max(A-B,e),D)),C===D&&(u=!0),A=B+C,v.push({axis:r,options:{height:C}})))})}),u||(d(v,function(e){e.axis.update(e.options,!1)}),y.redraw(!1)))},destroy:function(){var b=this;delete b.axis.resizer;this.eventsToUnbind&&d(this.eventsToUnbind,function(e){e()});b.controlLine.destroy();i(b,function(e,f){b[f]=null})}};c.prototype.keepProps.push("resizer");h(c,"afterRender",function(){var b=this.resizer,e=this.options.resize;e&&(e=!1!==e.enabled,b?e?b.init(this,!0):b.destroy():e&&(this.resizer=new k.AxisResizer(this)))});h(c,"destroy",function(b){!b.keepEvents&&this.resizer&&this.resizer.destroy()});q(o.prototype,"runPointActions",function(b){this.chart.activeResizer||b.apply(this,Array.prototype.slice.call(arguments,1))});q(o.prototype,"drag",function(b){this.chart.activeResizer||b.apply(this,Array.prototype.slice.call(arguments,1))})})(a)});