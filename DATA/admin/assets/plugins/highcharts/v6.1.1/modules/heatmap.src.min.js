"use strict";(function(a){if(typeof module==="object"&&module.exports){module.exports=a}else{a(Highcharts)}}(function(a){(function(m){var e=m.addEvent,h=m.Axis,f=m.Chart,d=m.color,c,l=m.each,j=m.extend,o=m.isNumber,b=m.Legend,i=m.LegendSymbolMixin,n=m.noop,k=m.merge,g=m.pick;if(!m.ColorAxis){c=m.ColorAxis=function(){this.init.apply(this,arguments)};j(c.prototype,h.prototype);j(c.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:true,endOnTick:true,offset:0,marker:{animation:{duration:50},width:0.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:true},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(h.prototype.keepProps),init:function(q,r){var s=q.options.legend.layout!=="vertical",p;this.coll="colorAxis";p=k(this.defaultColorAxisOptions,{side:s?2:1,reversed:!s},r,{opposite:!s,showEmpty:false,title:null,visible:q.options.legend.enabled});h.prototype.init.call(this,q,p);if(r.dataClasses){this.initDataClasses(r)}this.initStops();this.horiz=s;this.zoomEnabled=false;this.defaultLegendLength=200},initDataClasses:function(v){var t=this.chart,q,u=0,r=t.options.chart.colorCount,s=this.options,p=v.dataClasses.length;this.dataClasses=q=[];this.legendItems=[];l(v.dataClasses,function(y,x){var w;y=k(y);q.push(y);if(y.color){return}if(s.dataClassColor==="category"){w=t.options.colors;r=w.length;y.color=w[u];y.colorIndex=u;u++;if(u===r){u=0}}else{y.color=d(s.minColor).tweenTo(d(s.maxColor),p<2?0.5:x/(p-1))}})},setTickPositions:function(){if(!this.dataClasses){return h.prototype.setTickPositions.call(this)}},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]];l(this.stops,function(p){p.color=d(p[1])})},setOptions:function(p){h.prototype.setOptions.call(this,p);this.options.crosshair=this.options.marker},setAxisSize:function(){var u=this.legendSymbol,t=this.chart,r=t.options.legend||{},q,v,s,p;if(u){this.left=q=u.attr("x");this.top=v=u.attr("y");this.width=s=u.attr("width");this.height=p=u.attr("height");this.right=t.chartWidth-q-s;this.bottom=t.chartHeight-v-p;this.len=this.horiz?s:p;this.pos=this.horiz?q:v}else{this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||this.defaultLegendLength}},normalizedValue:function(p){if(this.isLog){p=this.val2lin(p)}return 1-((this.max-p)/((this.max-this.min)||1))},toColor:function(w,x){var t,y=this.stops,u,v,q,p=this.dataClasses,s,r;if(p){r=p.length;while(r--){s=p[r];u=s.from;v=s.to;if((u===undefined||w>=u)&&(v===undefined||w<=v)){q=s.color;if(x){x.dataClass=r;x.colorIndex=s.colorIndex}break}}}else{t=this.normalizedValue(w);r=y.length;while(r--){if(t>y[r][0]){break}}u=y[r]||y[r+1];v=y[r+1]||u;t=1-(v[0]-t)/((v[0]-u[0])||1);q=u.color.tweenTo(v.color,t)}return q},getOffset:function(){var q=this.legendGroup,p=this.chart.axisOffset[this.side];if(q){this.axisParent=q;h.prototype.getOffset.call(this);if(!this.added){this.added=true;this.labelLeft=0;this.labelRight=this.width}this.chart.axisOffset[this.side]=p}},setLegendColor:function(){var t,s=this.horiz,r=this.reversed,p=r?1:0,q=r?0:1;t=s?[p,0,q,0]:[0,q,0,p];this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}},drawLegendSymbol:function(s,v){var r=s.padding,w=s.options,u=this.horiz,p=g(w.symbolWidth,u?this.defaultLegendLength:12),t=g(w.symbolHeight,u?12:this.defaultLegendLength),q=g(w.labelPadding,u?16:30),x=g(w.itemDistance,10);this.setLegendColor();v.legendSymbol=this.chart.renderer.rect(0,s.baseline-11,p,t).attr({zIndex:1}).add(v.legendGroup);this.legendItemWidth=p+r+(u?x:q);this.legendItemHeight=t+r+(u?q:0)},setState:function(p){l(this.series,function(q){q.setState(p)})},visible:true,setVisible:n,getSeriesExtremes:function(){var q=this.series,p=q.length;this.dataMin=Infinity;this.dataMax=-Infinity;while(p--){q[p].getExtremes();if(q[p].valueMin!==undefined){this.dataMin=Math.min(this.dataMin,q[p].valueMin);this.dataMax=Math.max(this.dataMax,q[p].valueMax)}}},drawCrosshair:function(u,p){var r=p&&p.plotX,q=p&&p.plotY,v,s=this.pos,t=this.len;if(p){v=this.toPixels(p[p.series.colorKey]);if(v<s){v=s-2}else{if(v>s+t){v=s+t+2}}p.plotX=v;p.plotY=this.len-v;h.prototype.drawCrosshair.call(this,u,p);p.plotX=r;p.plotY=q;if(this.cross&&!this.cross.addedToColorAxis&&this.legendGroup){this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup);this.cross.addedToColorAxis=true;this.cross.attr({fill:this.crosshair.color})}}},getPlotLinePath:function(q,p,t,r,s){return o(s)?(this.horiz?["M",s-4,this.top-6,"L",s+4,this.top-6,s,this.top,"Z"]:["M",this.left,s,"L",this.left-6,s+6,this.left-6,s-6,"Z"]):h.prototype.getPlotLinePath.call(this,q,p,t,r)},update:function(r,s){var q=this.chart,p=q.legend;l(this.series,function(t){t.isDirtyData=true});if(r.dataClasses&&p.allItems){l(p.allItems,function(t){if(t.isDataClass&&t.legendGroup){t.legendGroup.destroy()}});q.isDirtyLegend=true}q.options[this.coll]=k(this.userOptions,r);h.prototype.update.call(this,r,s);if(this.legendItem){this.setLegendColor();p.colorizeItem(this,true)}},remove:function(){if(this.legendItem){this.chart.legend.destroyItem(this)}h.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var t=this,s=this.chart,r=this.legendItems,q=s.options.legend,u=q.valueDecimals,v=q.valueSuffix||"",p;if(!r.length){l(this.dataClasses,function(y,w){var x=true,A=y.from,z=y.to;p="";if(A===undefined){p="< "}else{if(z===undefined){p="> "}}if(A!==undefined){p+=m.numberFormat(A,u)+v}if(A!==undefined&&z!==undefined){p+=" - "}if(z!==undefined){p+=m.numberFormat(z,u)+v}r.push(j({chart:s,name:p,options:{},drawLegendSymbol:i.drawRectangle,visible:true,setState:n,isDataClass:true,setVisible:function(){x=this.visible=!x;l(t.series,function(B){l(B.points,function(C){if(C.dataClass===w){C.setVisible(x)}})});s.legend.colorizeItem(this,x)}},y))})}return r},name:""});l(["fill","stroke"],function(p){m.Fx.prototype[p+"Setter"]=function(){this.elem.attr(p,d(this.start).tweenTo(d(this.end),this.pos),null,true)}});e(f,"afterGetAxes",function(){var p=this.options,q=p.colorAxis;this.colorAxis=[];if(q){new c(this,q)}});e(b,"afterGetAllItems",function(s){var r=[],p=this.chart.colorAxis[0],q;if(p&&p.options){if(p.options.showInLegend){if(p.options.dataClasses){r=p.getDataClassLegendSymbols()}else{r.push(p)}l(p.series,function(t){m.erase(s.allItems,t)})}}q=r.length;while(q--){s.allItems.unshift(r[q])}});e(b,"afterColorizeItem",function(p){if(p.visible&&p.item.legendColor){p.item.legendSymbol.attr({fill:p.item.legendColor})}});e(b,"afterUpdate",function(){if(this.chart.colorAxis[0]){this.chart.colorAxis[0].update({},arguments[2])}})}}(a));(function(c){var f=c.defined,e=c.each,d=c.noop,b=c.seriesTypes;c.colorPointMixin={isValid:function(){return(this.value!==null&&this.value!==Infinity&&this.value!==-Infinity)},setVisible:function(h){var g=this,i=h?"show":"hide";e(["graphic","dataLabel"],function(j){if(g[j]){g[j][i]()}})},setState:function(g){c.Point.prototype.setState.call(this,g);if(this.graphic){this.graphic.attr({zIndex:g==="hover"?1:0})}}};c.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:d,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:b.column.prototype.pointAttribs,translateColors:function(){var i=this,g=this.options.nullColor,h=this.colorAxis,j=this.colorKey;e(this.data,function(k){var m=k[j],l;l=k.options.color||(k.isNull?g:(h&&m!==undefined)?h.toColor(m,k):k.color||i.color);if(l){k.color=l}})},colorAttribs:function(g){var h={};if(f(g.color)){h[this.colorProp||"fill"]=g.color}return h}}}(a));(function(k){var g=k.colorPointMixin,b=k.colorSeriesMixin,j=k.each,f=k.LegendSymbolMixin,i=k.merge,l=k.noop,e=k.pick,h=k.Series,d=k.seriesType,c=k.seriesTypes;d("heatmap","scatter",{animation:false,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:true,verticalAlign:"middle",crop:false,overflow:false,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:false,brightness:0.2}}},i(b,{pointArrayMap:["y","value"],hasPointSpecificOptions:true,getExtremesFromAll:true,directTouch:true,init:function(){var m;c.scatter.prototype.init.apply(this,arguments);m=this.options;m.pointRange=e(m.pointRange,m.colsize||1);this.yAxis.axisPointRange=m.rowsize||1},translate:function(){var o=this,n=o.options,r=o.xAxis,m=o.yAxis,q=n.pointPadding||0,p=function(t,u,s){return Math.min(Math.max(u,t),s)};o.generatePoints();j(o.points,function(s){var z=(n.colsize||1)/2,x=(n.rowsize||1)/2,v=p(Math.round(r.len-r.translate(s.x-z,0,1,0,1)),-r.len,2*r.len),u=p(Math.round(r.len-r.translate(s.x+z,0,1,0,1)),-r.len,2*r.len),y=p(Math.round(m.translate(s.y-x,0,1,0,1)),-m.len,2*m.len),w=p(Math.round(m.translate(s.y+x,0,1,0,1)),-m.len,2*m.len),t=e(s.pointPadding,q);s.plotX=s.clientX=(v+u)/2;s.plotY=(y+w)/2;s.shapeType="rect";s.shapeArgs={x:Math.min(v,u)+t,y:Math.min(y,w)+t,width:Math.abs(u-v)-t*2,height:Math.abs(w-y)-t*2}});o.translateColors()},drawPoints:function(){c.column.prototype.drawPoints.call(this);j(this.points,function(m){m.graphic.attr(this.colorAttribs(m))},this)},animate:l,getBox:l,drawLegendSymbol:f.drawRectangle,alignDataLabel:c.column.prototype.alignDataLabel,getExtremes:function(){h.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;h.prototype.getExtremes.call(this)}}),k.extend({haloPath:function(m){if(!m){return[]}var n=this.shapeArgs;return["M",n.x-m,n.y-m,"L",n.x-m,n.y+n.height+m,n.x+n.width+m,n.y+n.height+m,n.x+n.width+m,n.y-m,"Z"]}},g))}(a));return(function(){}())}));