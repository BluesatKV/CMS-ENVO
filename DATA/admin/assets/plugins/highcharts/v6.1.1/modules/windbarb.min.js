(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(b){var a=function(h){var c=h.each,g=h.defined,e=h.seriesTypes,i=h.stableSort;return{getPlotBox:function(){return h.Series.prototype.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)},translate:function(){e.column.prototype.translate.apply(this);var I=this.options,H=this.chart,J=this.points,K=J.length-1,F,G,E=I.onSeries,E=E&&H.get(E),I=I.onKey||"y",d=E&&E.options.step,A=E&&E.points,C=A&&A.length,r=H.inverted,B=this.xAxis,o=this.yAxis,k=0,D,j,t,s;if(E&&E.visible&&C){for(k=(E.pointXOffset||0)+(E.barW||0)/2,F=E.currentDataGrouping,j=A[C-1].x+(F?F.totalRange:0),i(J,function(f,l){return f.x-l.x}),I="plot"+I[0].toUpperCase()+I.substr(1);C--&&J[K]&&!(D=A[C],F=J[K],F.y=D.y,D.x<=F.x&&void 0!==D[I]&&(F.x<=j&&(F.plotY=D[I],D.x<F.x&&!d&&(t=A[C+1])&&void 0!==t[I]&&(s=(F.x-D.x)/(t.x-D.x),F.plotY+=s*(t[I]-D[I]),F.y+=s*(t.y-D.y))),K--,C++,0>K));){}}c(J,function(f,m){var l;f.plotX+=k;if(void 0===f.plotY||r){0<=f.plotX&&f.plotX<=B.len?r?(f.plotY=B.translate(f.x,0,1,0,1),f.plotX=g(f.y)?o.translate(f.y,0,0,0,1):0):f.plotY=H.chartHeight-B.bottom-(B.opposite?B.height:0)+B.offset-o.top:f.shapeArgs={}}(G=J[m-1])&&G.plotX===f.plotX&&(void 0===G.stackIndex&&(G.stackIndex=0),l=G.stackIndex+1);f.stackIndex=l});this.onSeries=E}}}(b);(function(g,c){var e=g.each,d=g.seriesType;d("windbarb","column",{lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e {series.name}: \x3cb\x3e{point.value}\x3c/b\x3e ({point.beaufort})\x3cbr/\x3e'},vectorLength:20,yOffset:-20,xOffset:0},{pointArrayMap:["value","direction"],parallelArrays:["x","value","direction"],beaufortName:"Calm;Light air;Light breeze;Gentle breeze;Moderate breeze;Fresh breeze;Strong breeze;Near gale;Gale;Strong gale;Storm;Violent storm;Hurricane".split(";"),beaufortFloor:[0,0.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],trackerGroups:["markerGroup"],pointAttribs:function(i,j){var h=this.options;i=i.color||this.color;var f=this.options.lineWidth;j&&(i=h.states[j].color||i,f=(h.states[j].lineWidth||f)+(h.states[j].lineWidthPlus||0));return{stroke:i,"stroke-width":f}},markerAttribs:function(){},getPlotBox:c.getPlotBox,windArrow:function(j){var k=1.943844*j.value,i,f=this.options.vectorLength/20,h=-10;if(j.isNull){return[]}if(0===j.beaufortLevel){return this.chart.renderer.symbols.circle(-10*f,-10*f,20*f,20*f)}j=["M",0,7*f,"L",-1.5*f,7*f,0,10*f,1.5*f,7*f,0,7*f,0,-10*f];i=(k-k%50)/50;if(0<i){for(;i--;){j.push(-10===h?"L":"M",0,h*f,"L",5*f,h*f+2,"L",0,h*f+4),k-=50,h+=7}}i=(k-k%10)/10;if(0<i){for(;i--;){j.push(-10===h?"L":"M",0,h*f,"L",7*f,h*f),k-=10,h+=3}}i=(k-k%5)/5;if(0<i){for(;i--;){j.push(-10===h?"L":"M",0,h*f,"L",4*f,h*f),k-=5,h+=3}}return j},translate:function(){var f=this.beaufortFloor,h=this.beaufortName;c.translate.call(this);e(this.points,function(j){for(var i=0;i<f.length&&!(f[i]>j.value);i++){}j.beaufortLevel=i-1;j.beaufort=h[i-1]})},drawPoints:function(){var i=this.chart,j=this.yAxis,h=i.inverted,f=this.options.vectorLength/2;e(this.points,function(k){var l=k.plotX,m=k.plotY;i.isInsidePlot(l,0,!1)?(k.graphic||(k.graphic=this.chart.renderer.path().add(this.markerGroup)),k.graphic.attr({d:this.windArrow(k),translateX:l+this.options.xOffset,translateY:m+this.options.yOffset,rotation:k.direction}).attr(this.pointAttribs(k))):k.graphic&&(k.graphic=k.graphic.destroy());k.tooltipPos=[l+this.options.xOffset+(h&&!this.onSeries?f:0),m+this.options.yOffset-(h?0:f+j.pos-i.plotTop)]},this)},animate:function(f){f?this.markerGroup.attr({opacity:0.01}):(this.markerGroup.animate({opacity:1},g.animObject(this.options.animation)),this.animate=null)},invertGroups:g.noop},{isValid:function(){return g.isNumber(this.value)&&0<=this.value}})})(b,a)});