(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(j){var h=j.pick,e=j.each,i=j.grep,d=j.arrayMin,c=j.arrayMax,b=j.seriesType,k=j.seriesTypes.pie.prototype;b("variablepie","pie",{minPointSize:"10%",maxPointSize:"100%",zMin:void 0,zMax:void 0,sizeBy:"area",tooltip:{pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e {series.name}\x3cbr/\x3eValue: {point.y}\x3cbr/\x3eSize: {point.z}\x3cbr/\x3e'}},{pointArrayMap:["y","z"],parallelArrays:["x","y","z"],redraw:function(){this.center=null;k.redraw.call(this,arguments)},zValEval:function(f){return"number"!==typeof f||isNaN(f)?null:!0},calculateExtremes:function(){var f=this.chart,g=this.options,m;m=this.zData;var n=Math.min(f.plotWidth,f.plotHeight)-2*(g.slicedOffset||0),l={},f=this.center||this.getCenter();e(["minPointSize","maxPointSize"],function(p){var o=g[p],q=/%$/.test(o),o=parseInt(o,10);l[p]=q?n*o/100:2*o});this.minPxSize=f[3]+l.minPointSize;this.maxPxSize=Math.max(Math.min(f[2],l.maxPointSize),f[3]+l.minPointSize);m.length&&(f=h(g.zMin,d(i(m,this.zValEval))),m=h(g.zMax,c(i(m,this.zValEval))),this.getRadii(f,m,this.minPxSize,this.maxPxSize))},getRadii:function(y,r,v,t){var s=0,x,q=this.zData,w=q.length,o=[],u="radius"!==this.options.sizeBy,p=r-y;for(s;s<w;s++){x=this.zValEval(q[s])?q[s]:y,x<=y?x=v/2:x>=r?x=t/2:(x=0<p?(x-y)/p:0.5,u&&(x=Math.sqrt(x)),x=Math.ceil(v+x*(t-v))/2),o.push(x)}this.radii=o},translate:function(G){this.generatePoints();var z=0,C=this.options,B=C.slicedOffset,A=B+(C.borderWidth||0),F,y,E,w=C.startAngle||0,g=Math.PI/180*(w-90),x=Math.PI/180*(h(C.endAngle,w+360)-90),w=x-g,o=this.points,H,J=C.dataLabels.distance,C=C.ignoreHiddenPoint,I=o.length,D,s;this.startAngleRad=g;this.endAngleRad=x;this.calculateExtremes();G||(this.center=G=this.getCenter());this.getX=function(l,n,p){var m=p.series.radii[p.index];E=Math.asin(Math.max(Math.min((l-G[1])/(m+p.labelDistance),1),-1));return G[0]+(n?-1:1)*Math.cos(E)*(m+p.labelDistance)};for(x=0;x<I;x++){D=o[x];s=this.radii[x];D.labelDistance=h(D.options.dataLabels&&D.options.dataLabels.distance,J);this.maxLabelDistance=Math.max(this.maxLabelDistance||0,D.labelDistance);y=g+z*w;if(!C||D.visible){z+=D.percentage/100}F=g+z*w;D.shapeType="arc";D.shapeArgs={x:G[0],y:G[1],r:s,innerR:G[3]/2,start:Math.round(1000*y)/1000,end:Math.round(1000*F)/1000};E=(F+y)/2;E>1.5*Math.PI?E-=2*Math.PI:E<-Math.PI/2&&(E+=2*Math.PI);D.slicedTranslation={translateX:Math.round(Math.cos(E)*B),translateY:Math.round(Math.sin(E)*B)};F=Math.cos(E)*G[2]/2;H=Math.sin(E)*G[2]/2;y=Math.cos(E)*s;s*=Math.sin(E);D.tooltipPos=[G[0]+0.7*F,G[1]+0.7*H];D.half=E<-Math.PI/2||E>Math.PI/2?1:0;D.angle=E;F=Math.min(A,D.labelDistance/5);D.labelPos=[G[0]+y+Math.cos(E)*D.labelDistance,G[1]+s+Math.sin(E)*D.labelDistance,G[0]+y+Math.cos(E)*F,G[1]+s+Math.sin(E)*F,G[0]+y,G[1]+s,0>D.labelDistance?"center":D.half?"right":"left",E]}}})})(a)});