(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(i){function g(c,n){var q=o.getElementsByTagName("head")[0],e=o.createElement("script");e.type="text/javascript";e.src=c;e.onload=n;e.onerror=function(){i.error("Error loading script "+c)};q.appendChild(e)}var b=i.addEvent,p=i.merge,h=i.win,d=h.navigator,o=h.document,k=i.each,j=h.URL||h.webkitURL||h,f=/Edge\/|Trident\/|MSIE /.test(d.userAgent),m=/Edge\/\d+/.test(d.userAgent),l=f?150:0;i.CanVGRenderer={};i.dataURLtoBlob=function(e){if(h.atob&&h.ArrayBuffer&&h.Uint8Array&&h.Blob&&j.createObjectURL){e=e.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);for(var r=h.atob(e[3]),q=new h.ArrayBuffer(r.length),q=new h.Uint8Array(q),n=0;n<q.length;++n){q[n]=r.charCodeAt(n)}e=new h.Blob([q],{type:e[1]});return j.createObjectURL(e)}};i.downloadURL=function(c,q){var r=o.createElement("a"),e;if("string"===typeof c||c instanceof String||!d.msSaveOrOpenBlob){if(m||2000000<c.length){if(c=i.dataURLtoBlob(c),!c){throw"Data URL length limit reached"}}if(void 0!==r.download){r.href=c,r.download=q,o.body.appendChild(r),r.click(),o.body.removeChild(r)}else{try{if(e=h.open(c,"chart"),void 0===e||null===e){throw"Failed to open window"}}catch(n){h.location.href=c}}}else{d.msSaveOrOpenBlob(c,q)}};i.svgToDataUrl=function(e){var q=-1<d.userAgent.indexOf("WebKit")&&0>d.userAgent.indexOf("Chrome");try{if(!q&&0>d.userAgent.toLowerCase().indexOf("firefox")){return j.createObjectURL(new h.Blob([e],{type:"image/svg+xml;charset-utf-16"}))}}catch(n){}return"data:image/svg+xml;charset\x3dUTF-8,"+encodeURIComponent(e)};i.imageToDataUrl=function(A,z,y,B,C,s,t,r,n){var w=new h.Image,v,x=function(){setTimeout(function(){var u=o.createElement("canvas"),q=u.getContext&&u.getContext("2d"),c;try{if(q){u.height=w.height*B;u.width=w.width*B;q.drawImage(w,0,0,u.width,u.height);try{c=u.toDataURL(z),C(c,z,y,B)}catch(D){v(A,z,y,B)}}else{t(A,z,y,B)}}finally{n&&n(A,z,y,B)}},l)},e=function(){r(A,z,y,B);n&&n(A,z,y,B)};v=function(){w=new h.Image;v=s;w.crossOrigin="Anonymous";w.onload=x;w.onerror=e;w.src=A};w.onload=x;w.onerror=e;w.src=A};i.downloadSVGLocal=function(E,B,C,F){function I(u,q){q=new h.jsPDF("l","pt",[u.width.baseVal.value+2*q,u.height.baseVal.value+2*q]);k(u.querySelectorAll('*[visibility\x3d"hidden"]'),function(v){v.parentNode.removeChild(v)});h.svg2pdf(u,q,{removeInvalid:!0});return q.output("datauristring")}function s(){D.innerHTML=E;var v=D.getElementsByTagName("text"),u;k(v,function(w){k(["font-family","font-size"],function(z){for(var A=w;A&&A!==D;){if(A.style[z]){w.style[z]=A.style[z];break}A=A.parentNode}});w.style["font-family"]=w.style["font-family"]&&w.style["font-family"].split(" ").splice(-1);u=w.getElementsByTagName("title");k(u,function(z){w.removeChild(z)})});v=I(D.firstChild,0);try{i.downloadURL(v,H),F&&F()}catch(q){C(q)}}var t,r,e=!0,y,x=B.libURL||i.getOptions().exporting.libURL,D=o.createElement("div"),c=B.type||"image/png",H=(B.filename||"chart")+"."+("image/svg+xml"===c?"svg":c.split("/")[1]),n=B.scale||1,x="/"!==x.slice(-1)?x+"/":x;if("image/svg+xml"===c){try{d.msSaveOrOpenBlob?(r=new MSBlobBuilder,r.append(E),t=r.getBlob("image/svg+xml")):t=i.svgToDataUrl(E),i.downloadURL(t,H),F&&F()}catch(G){C(G)}}else{"application/pdf"===c?h.jsPDF&&h.svg2pdf?s():(e=!0,g(x+"jspdf.js",function(){g(x+"svg2pdf.js",function(){s()})})):(t=i.svgToDataUrl(E),y=function(){try{j.revokeObjectURL(t)}catch(q){}},i.imageToDataUrl(t,c,{},n,function(q){try{i.downloadURL(q,H),F&&F()}catch(u){C(u)}},function(){var A=o.createElement("canvas"),z=A.getContext("2d"),v=E.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*n,w=E.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*n,q=function(){z.drawSvg(E,0,0,v,w);try{i.downloadURL(d.msSaveOrOpenBlob?A.msToBlob():A.toDataURL(c),H),F&&F()}catch(u){C(u)}finally{y()}};A.width=v;A.height=w;h.canvg?q():(e=!0,g(x+"rgbcolor.js",function(){g(x+"canvg.js",function(){q()})}))},C,C,function(){e&&y()}))}};i.Chart.prototype.getSVGForLocalExport=function(C,A,B,D){var z=this,u,w=0,t,r,y,x,s,c=function(e,q,n){++w;n.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",e);w===u.length&&D(z.sanitizeSVG(t.innerHTML,r))};z.unbindGetSVG=b(z,"getSVG",function(e){r=e.chartCopy.options;t=e.chartCopy.container.cloneNode(!0)});z.getSVGForExport(C,A);u=t.getElementsByTagName("image");try{if(!u.length){D(z.sanitizeSVG(t.innerHTML,r));return}x=0;for(s=u.length;x<s;++x){y=u[x],i.imageToDataUrl(y.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:y},C.scale,c,B,B,B)}}catch(E){B(E)}z.unbindGetSVG()};i.Chart.prototype.exportChartLocal=function(c,r){var s=this,n=i.merge(s.options.exporting,c),q=function(e){!1===n.fallbackToExportServer?n.error?n.error(n,e):i.error(28,!0):s.exportChart(n)};f&&("application/pdf"===n.type||s.container.getElementsByTagName("image").length&&"image/svg+xml"!==n.type)||"application/pdf"===n.type&&s.container.getElementsByTagName("image").length?q("Image type not supported for this chart/browser."):s.getSVGForLocalExport(n,r,q,function(e){-1<e.indexOf("\x3cforeignObject")&&"image/svg+xml"!==n.type?q("Image type not supported for charts with embedded HTML"):i.downloadSVGLocal(e,n,q)})};p(!0,i.getOptions().exporting,{libURL:"https://code.highcharts.com/6.1.1/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}})})(a)});