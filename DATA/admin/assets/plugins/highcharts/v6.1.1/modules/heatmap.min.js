(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(y){var B=y.addEvent,o=y.Axis,j=y.Chart,k=y.color,f,l=y.each,C=y.extend,d=y.isNumber,s=y.Legend,v=y.LegendSymbolMixin,z=y.noop,A=y.merge,i=y.pick;y.ColorAxis||(f=y.ColorAxis=function(){this.init.apply(this,arguments)},C(f.prototype,o.prototype),C(f.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:0.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(o.prototype.keepProps),init:function(c,g){var e="vertical"!==c.options.legend.layout,b;this.coll="colorAxis";b=A(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},g,{opposite:!e,showEmpty:!1,title:null,visible:c.options.legend.enabled});o.prototype.init.call(this,c,b);g.dataClasses&&this.initDataClasses(g);this.initStops();this.horiz=e;this.zoomEnabled=!1;this.defaultLegendLength=200},initDataClasses:function(h){var q=this.chart,n,g=0,m=q.options.chart.colorCount,c=this.options,p=h.dataClasses.length;this.dataClasses=n=[];this.legendItems=[];l(h.dataClasses,function(b,e){b=A(b);n.push(b);b.color||("category"===c.dataClassColor?(e=q.options.colors,m=e.length,b.color=e[g],b.colorIndex=g,g++,g===m&&(g=0)):b.color=k(c.minColor).tweenTo(k(c.maxColor),2>p?0.5:e/(p-1)))})},setTickPositions:function(){if(!this.dataClasses){return o.prototype.setTickPositions.call(this)}},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]];l(this.stops,function(b){b.color=k(b[1])})},setOptions:function(b){o.prototype.setOptions.call(this,b);this.options.crosshair=this.options.marker},setAxisSize:function(){var c=this.legendSymbol,h=this.chart,g=h.options.legend||{},b,e;c?(this.left=g=c.attr("x"),this.top=b=c.attr("y"),this.width=e=c.attr("width"),this.height=c=c.attr("height"),this.right=h.chartWidth-g-e,this.bottom=h.chartHeight-b-c,this.len=this.horiz?e:c,this.pos=this.horiz?g:b):this.len=(this.horiz?g.symbolWidth:g.symbolHeight)||this.defaultLegendLength},normalizedValue:function(b){this.isLog&&(b=this.val2lin(b));return 1-(this.max-b)/(this.max-this.min||1)},toColor:function(m,r){var p=this.stops,h,n,g=this.dataClasses,q,t;if(g){for(t=g.length;t--;){if(q=g[t],h=q.from,p=q.to,(void 0===h||m>=h)&&(void 0===p||m<=p)){n=q.color;r&&(r.dataClass=t,r.colorIndex=q.colorIndex);break}}}else{m=this.normalizedValue(m);for(t=p.length;t--&&!(m>p[t][0]);){}h=p[t]||p[t+1];p=p[t+1]||h;m=1-(p[0]-m)/(p[0]-h[0]||1);n=h.color.tweenTo(p.color,m)}return n},getOffset:function(){var b=this.legendGroup,c=this.chart.axisOffset[this.side];b&&(this.axisParent=b,o.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=c)},setLegendColor:function(){var b,c=this.reversed;b=c?1:0;c=c?0:1;b=this.horiz?[b,0,c,0]:[0,c,0,b];this.legendColor={linearGradient:{x1:b[0],y1:b[1],x2:b[2],y2:b[3]},stops:this.stops}},drawLegendSymbol:function(m,t){var q=m.padding,g=m.options,n=this.horiz,u=i(g.symbolWidth,n?this.defaultLegendLength:12),r=i(g.symbolHeight,n?12:this.defaultLegendLength),p=i(g.labelPadding,n?16:30),g=i(g.itemDistance,10);this.setLegendColor();t.legendSymbol=this.chart.renderer.rect(0,m.baseline-11,u,r).attr({zIndex:1}).add(t.legendGroup);this.legendItemWidth=u+q+(n?g:p);this.legendItemHeight=r+q+(n?p:0)},setState:function(b){l(this.series,function(c){c.setState(b)})},visible:!0,setVisible:z,getSeriesExtremes:function(){var b=this.series,c=b.length;this.dataMin=Infinity;for(this.dataMax=-Infinity;c--;){b[c].getExtremes(),void 0!==b[c].valueMin&&(this.dataMin=Math.min(this.dataMin,b[c].valueMin),this.dataMax=Math.max(this.dataMax,b[c].valueMax))}},drawCrosshair:function(m,r){var p=r&&r.plotX,g=r&&r.plotY,t,q=this.pos,n=this.len;r&&(t=this.toPixels(r[r.series.colorKey]),t<q?t=q-2:t>q+n&&(t=q+n+2),r.plotX=t,r.plotY=this.len-t,o.prototype.drawCrosshair.call(this,m,r),r.plotX=p,r.plotY=g,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(g,m,h,e,n){return d(n)?this.horiz?["M",n-4,this.top-6,"L",n+4,this.top-6,n,this.top,"Z"]:["M",this.left,n,"L",this.left-6,n+6,this.left-6,n-6,"Z"]:o.prototype.getPlotLinePath.call(this,g,m,h,e)},update:function(g,h){var m=this.chart,e=m.legend;l(this.series,function(b){b.isDirtyData=!0});g.dataClasses&&e.allItems&&(l(e.allItems,function(b){b.isDataClass&&b.legendGroup&&b.legendGroup.destroy()}),m.isDirtyLegend=!0);m.options[this.coll]=A(this.userOptions,g);o.prototype.update.call(this,g,h);this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this);o.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var b=this,r=this.chart,n=this.legendItems,p=r.options.legend,c=p.valueDecimals,m=p.valueSuffix||"",h;n.length||l(this.dataClasses,function(w,q){var g=!0,t=w.from,u=w.to;h="";void 0===t?h="\x3c ":void 0===u&&(h="\x3e ");void 0!==t&&(h+=y.numberFormat(t,c)+m);void 0!==t&&void 0!==u&&(h+=" - ");void 0!==u&&(h+=y.numberFormat(u,c)+m);n.push(C({chart:r,name:h,options:{},drawLegendSymbol:v.drawRectangle,visible:!0,setState:z,isDataClass:!0,setVisible:function(){g=this.visible=!g;l(b.series,function(e){l(e.points,function(x){x.dataClass===q&&x.setVisible(g)})});r.legend.colorizeItem(this,g)}},w))});return n},name:""}),l(["fill","stroke"],function(b){y.Fx.prototype[b+"Setter"]=function(){this.elem.attr(b,k(this.start).tweenTo(k(this.end),this.pos),null,!0)}}),B(j,"afterGetAxes",function(){var b=this.options.colorAxis;this.colorAxis=[];b&&new f(this,b)}),B(s,"afterGetAllItems",function(b){var e=[],g=this.chart.colorAxis[0];g&&g.options&&g.options.showInLegend&&(g.options.dataClasses?e=g.getDataClassLegendSymbols():e.push(g),l(g.series,function(h){y.erase(b.allItems,h)}));for(g=e.length;g--;){b.allItems.unshift(e[g])}}),B(s,"afterColorizeItem",function(b){b.visible&&b.item.legendColor&&b.item.legendSymbol.attr({fill:b.item.legendColor})}),B(s,"afterUpdate",function(g,h,e){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},e)}))})(a);(function(d){var h=d.defined,f=d.each,e=d.noop,c=d.seriesTypes;d.colorPointMixin={isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value},setVisible:function(g){var i=this,j=g?"show":"hide";f(["graphic","dataLabel"],function(k){if(i[k]){i[k][j]()}})},setState:function(b){d.Point.prototype.setState.call(this,b);this.graphic&&this.graphic.attr({zIndex:"hover"===b?1:0})}};d.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:e,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:c.column.prototype.pointAttribs,translateColors:function(){var i=this,j=this.options.nullColor,g=this.colorAxis,k=this.colorKey;f(this.data,function(b){var l=b[k];if(l=b.options.color||(b.isNull?j:g&&void 0!==l?g.toColor(l,b):b.color||i.color)){b.color=l}})},colorAttribs:function(i){var j={};h(i.color)&&(j[this.colorProp||"fill"]=i.color);return j}}})(a);(function(k){var e=k.colorPointMixin,j=k.each,l=k.merge,f=k.noop,d=k.pick,i=k.Series,o=k.seriesType,c=k.seriesTypes;o("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}\x3cbr/\x3e"},states:{hover:{halo:!1,brightness:0.2}}},l(k.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var g;c.scatter.prototype.init.apply(this,arguments);g=this.options;g.pointRange=d(g.pointRange,g.colsize||1);this.yAxis.axisPointRange=g.rowsize||1},translate:function(){var n=this.options,s=this.xAxis,q=this.yAxis,g=n.pointPadding||0,r=function(m,h,p){return Math.min(Math.max(h,m),p)};this.generatePoints();j(this.points,function(b){var t=(n.colsize||1)/2,p=(n.rowsize||1)/2,m=r(Math.round(s.len-s.translate(b.x-t,0,1,0,1)),-s.len,2*s.len),t=r(Math.round(s.len-s.translate(b.x+t,0,1,0,1)),-s.len,2*s.len),h=r(Math.round(q.translate(b.y-p,0,1,0,1)),-q.len,2*q.len),p=r(Math.round(q.translate(b.y+p,0,1,0,1)),-q.len,2*q.len),u=d(b.pointPadding,g);b.plotX=b.clientX=(m+t)/2;b.plotY=(h+p)/2;b.shapeType="rect";b.shapeArgs={x:Math.min(m,t)+u,y:Math.min(h,p)+u,width:Math.abs(t-m)-2*u,height:Math.abs(p-h)-2*u}});this.translateColors()},drawPoints:function(){c.column.prototype.drawPoints.call(this);j(this.points,function(g){g.graphic.attr(this.colorAttribs(g))},this)},animate:f,getBox:f,drawLegendSymbol:k.LegendSymbolMixin.drawRectangle,alignDataLabel:c.column.prototype.alignDataLabel,getExtremes:function(){i.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;i.prototype.getExtremes.call(this)}}),k.extend({haloPath:function(g){if(!g){return[]}var h=this.shapeArgs;return["M",h.x-g,h.y-g,"L",h.x-g,h.y+h.height+g,h.x+h.width+g,h.y+h.height+g,h.x+h.width+g,h.y-g,"Z"]}},e))})(a)});