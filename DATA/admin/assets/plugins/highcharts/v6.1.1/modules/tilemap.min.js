(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(h){var f=h.defined,e=h.each,b=h.noop,c=h.seriesTypes;h.colorPointMixin={isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value},setVisible:function(j){var i=this,g=j?"show":"hide";e(["graphic","dataLabel"],function(d){if(i[d]){i[d][g]()}})},setState:function(d){h.Point.prototype.setState.call(this,d);this.graphic&&this.graphic.attr({zIndex:"hover"===d?1:0})}};h.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:b,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:c.column.prototype.pointAttribs,translateColors:function(){var k=this,j=this.options.nullColor,i=this.colorAxis,g=this.colorKey;e(this.data,function(l){var d=l[g];if(d=l.options.color||(l.isNull?j:i&&void 0!==d?i.toColor(d,l):l.color||k.color)){l.color=d}})},colorAttribs:function(i){var g={};f(i.color)&&(g[this.colorProp||"fill"]=i.color);return g}}})(a);(function(i){var e=i.colorPointMixin,c=i.each,l=i.merge,n=i.noop,h=i.pick,m=i.Series,k=i.seriesType,j=i.seriesTypes;k("heatmap","scatter",{animation:!1,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}\x3cbr/\x3e"},states:{hover:{halo:!1,brightness:0.2}}},l(i.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var b;j.scatter.prototype.init.apply(this,arguments);b=this.options;b.pointRange=h(b.pointRange,b.colsize||1);this.yAxis.axisPointRange=b.rowsize||1},translate:function(){var f=this.options,o=this.xAxis,q=this.yAxis,g=f.pointPadding||0,p=function(d,r,s){return Math.min(Math.max(r,d),s)};this.generatePoints();c(this.points,function(v){var s=(f.colsize||1)/2,u=(f.rowsize||1)/2,d=p(Math.round(o.len-o.translate(v.x-s,0,1,0,1)),-o.len,2*o.len),s=p(Math.round(o.len-o.translate(v.x+s,0,1,0,1)),-o.len,2*o.len),r=p(Math.round(q.translate(v.y-u,0,1,0,1)),-q.len,2*q.len),u=p(Math.round(q.translate(v.y+u,0,1,0,1)),-q.len,2*q.len),b=h(v.pointPadding,g);v.plotX=v.clientX=(d+s)/2;v.plotY=(r+u)/2;v.shapeType="rect";v.shapeArgs={x:Math.min(d,s)+b,y:Math.min(r,u)+b,width:Math.abs(s-d)-2*b,height:Math.abs(u-r)-2*b}});this.translateColors()},drawPoints:function(){j.column.prototype.drawPoints.call(this);c(this.points,function(d){d.graphic.attr(this.colorAttribs(d))},this)},animate:n,getBox:n,drawLegendSymbol:i.LegendSymbolMixin.drawRectangle,alignDataLabel:j.column.prototype.alignDataLabel,getExtremes:function(){m.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;m.prototype.getExtremes.call(this)}}),i.extend({haloPath:function(d){if(!d){return[]}var f=this.shapeArgs;return["M",f.x-d,f.y-d,"L",f.x-d,f.y+f.height+d,f.x+f.width+d,f.y+f.height+d,f.x+f.width+d,f.y-d,"Z"]}},e))})(a);(function(k){var i=k.seriesType,h=k.each,b=k.reduce,e=k.pick,j=function(f,d,g){return Math.min(Math.max(d,f),g)},c=function(f,d,g){f=f.options;return{xPad:(f.colsize||1)/-d,yPad:(f.rowsize||1)/-g}};k.tileShapeTypes={hexagon:{alignDataLabel:k.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(d){return c(d,3,2)},haloPath:function(f){if(!f){return[]}var d=this.tileEdges;return["M",d.x2-f,d.y1+f,"L",d.x3+f,d.y1+f,d.x4+1.5*f,d.y2,d.x3+f,d.y3-f,d.x2-f,d.y3-f,d.x1-1.5*f,d.y2,"Z"]},translate:function(){var l=this.options,f=this.xAxis,p=this.yAxis,n=l.pointPadding||0,o=(l.colsize||1)/3,g=(l.rowsize||1)/2,m;this.generatePoints();h(this.points,function(B){var y=j(Math.floor(f.len-f.translate(B.x-2*o,0,1,0,1)),-f.len,2*f.len),A=j(Math.floor(f.len-f.translate(B.x-o,0,1,0,1)),-f.len,2*f.len),x=j(Math.floor(f.len-f.translate(B.x+o,0,1,0,1)),-f.len,2*f.len),C=j(Math.floor(f.len-f.translate(B.x+2*o,0,1,0,1)),-f.len,2*f.len),w=j(Math.floor(p.translate(B.y-g,0,1,0,1)),-p.len,2*p.len),v=j(Math.floor(p.translate(B.y,0,1,0,1)),-p.len,2*p.len),u=j(Math.floor(p.translate(B.y+g,0,1,0,1)),-p.len,2*p.len),s=e(B.pointPadding,n),z=s*Math.abs(A-y)/Math.abs(u-v),z=f.reversed?-z:z,d=f.reversed?-s:s,s=p.reversed?-s:s;B.x%2&&(m=m||Math.round(Math.abs(u-w)/2)*(p.reversed?-1:1),w+=m,v+=m,u+=m);B.plotX=B.clientX=(A+x)/2;B.plotY=v;y+=z+d;A+=d;x-=d;C-=z+d;w-=s;u+=s;B.tileEdges={x1:y,x2:A,x3:x,x4:C,y1:w,y2:v,y3:u};B.shapeType="path";B.shapeArgs={d:["M",A,w,"L",x,w,C,v,x,u,A,u,y,v,"Z"]}});this.translateColors()}},diamond:{alignDataLabel:k.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(d){return c(d,2,2)},haloPath:function(f){if(!f){return[]}var d=this.tileEdges;return["M",d.x2,d.y1+f,"L",d.x3+f,d.y2,d.x2,d.y3-f,d.x1-f,d.y2,"Z"]},translate:function(){var m=this.options,f=this.xAxis,q=this.yAxis,p=m.pointPadding||0,o=m.colsize||1,l=(m.rowsize||1)/2,n;this.generatePoints();h(this.points,function(x){var w=j(Math.round(f.len-f.translate(x.x-o,0,1,0,0)),-f.len,2*f.len),v=j(Math.round(f.len-f.translate(x.x,0,1,0,0)),-f.len,2*f.len),u=j(Math.round(f.len-f.translate(x.x+o,0,1,0,0)),-f.len,2*f.len),y=j(Math.round(q.translate(x.y-l,0,1,0,0)),-q.len,2*q.len),s=j(Math.round(q.translate(x.y,0,1,0,0)),-q.len,2*q.len),r=j(Math.round(q.translate(x.y+l,0,1,0,0)),-q.len,2*q.len),g=e(x.pointPadding,p),d=g*Math.abs(v-w)/Math.abs(r-s),d=f.reversed?-d:d,g=q.reversed?-g:g;x.x%2&&(n=Math.abs(r-y)/2*(q.reversed?-1:1),y+=n,s+=n,r+=n);x.plotX=x.clientX=v;x.plotY=s;w+=d;u-=d;y-=g;r+=g;x.tileEdges={x1:w,x2:v,x3:u,y1:y,y2:s,y3:r};x.shapeType="path";x.shapeArgs={d:["M",v,y,"L",u,s,v,r,w,s,"Z"]}});this.translateColors()}},circle:{alignDataLabel:k.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(d){return c(d,2,2)},haloPath:function(d){return k.seriesTypes.scatter.prototype.pointClass.prototype.haloPath.call(this,d+(d&&this.radius))},translate:function(){var s=this.options,r=this.xAxis,q=this.yAxis,p=s.pointPadding||0,o=(s.rowsize||1)/2,t=s.colsize||1,m,n,x,y,f=!1;this.generatePoints();h(this.points,function(d){var u=j(Math.round(r.len-r.translate(d.x,0,1,0,0)),-r.len,2*r.len),v=j(Math.round(q.translate(d.y,0,1,0,0)),-q.len,2*q.len),l=p,g=!1;void 0!==d.pointPadding&&(l=d.pointPadding,f=g=!0);if(!y||f){m=Math.abs(j(Math.floor(r.len-r.translate(d.x+t,0,1,0,0)),-r.len,2*r.len)-u),n=Math.abs(j(Math.floor(q.translate(d.y+o,0,1,0,0)),-q.len,2*q.len)-v),x=Math.floor(Math.sqrt(m*m+n*n)/2),y=Math.min(m,x,n)-l,f&&!g&&(f=!1)}d.x%2&&(v+=n*(q.reversed?-1:1));d.plotX=d.clientX=u;d.plotY=v;d.radius=y;d.shapeType="circle";d.shapeArgs={x:u,y:v,r:y}});this.translateColors()}},square:{alignDataLabel:k.seriesTypes.heatmap.prototype.alignDataLabel,translate:k.seriesTypes.heatmap.prototype.translate,getSeriesPadding:function(){},haloPath:k.seriesTypes.heatmap.prototype.pointClass.prototype.haloPath}};k.wrap(k.Axis.prototype,"setAxisTranslation",function(f){f.apply(this,Array.prototype.slice.call(arguments,1));var d=this,l=b(k.map(d.series,function(m){return m.getSeriesPixelPadding&&m.getSeriesPixelPadding(d)}),function(n,m){return(n&&n.padding)>(m&&m.padding)?n:m},void 0)||{padding:0,axisLengthFactor:1},g=Math.round(l.padding*l.axisLengthFactor);l.padding&&(d.len-=g,f.apply(d,Array.prototype.slice.call(arguments,1)),d.minPixelPadding+=l.padding,d.len+=g)});i("tilemap","heatmap",{states:{hover:{halo:{enabled:!0,size:2,opacity:0.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},{setOptions:function(){var d=k.seriesTypes.heatmap.prototype.setOptions.apply(this,Array.prototype.slice.call(arguments));this.tileShape=k.tileShapeTypes[d.tileShape];return d},alignDataLabel:function(){return this.tileShape.alignDataLabel.apply(this,Array.prototype.slice.call(arguments))},getSeriesPixelPadding:function(g){var f=g.isXAxis,m=this.tileShape.getSeriesPadding(this),l;if(!m){return{padding:0,axisLengthFactor:1}}l=Math.round(g.translate(f?2*m.xPad:m.yPad,0,1,0,1));g=Math.round(g.translate(f?m.xPad:0,0,1,0,1));return{padding:Math.abs(l-g)||0,axisLengthFactor:f?2:1.1}},translate:function(){return this.tileShape.translate.apply(this,Array.prototype.slice.call(arguments))}},k.extend({haloPath:function(){return this.series.tileShape.haloPath.apply(this,Array.prototype.slice.call(arguments))}},k.colorPointMixin))})(a)});