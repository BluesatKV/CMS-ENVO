(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(K){var G=K.animObject,e=K.noop,c=K.color,b=K.defaultOptions,J=K.each,s=K.extend,g=K.format,v=K.objectEach,j=K.pick,I=K.Chart,H=K.seriesTypes,r=H.pie,H=H.column,o=K.Tick,h=K.fireEvent,l=K.inArray,i=1;s(b.lang,{drillUpText:"\u25c1 Back to {series.name}"});b.drilldown={animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};K.SVGRenderer.prototype.Element.prototype.fadeIn=function(d){this.attr({opacity:0.1,visibility:"inherit"}).animate({opacity:j(this.newOpacity,1)},d||{duration:250})};I.prototype.addSeriesAsDrilldown=function(k,d){this.addSingleSeriesAsDrilldown(k,d);this.applyDrilldown()};I.prototype.addSingleSeriesAsDrilldown=function(y,x){var w=y.series,t=w.xAxis,u=w.yAxis,q,p=[],z=[],n,d,k;k={colorIndex:j(y.colorIndex,w.colorIndex)};this.drilldownLevels||(this.drilldownLevels=[]);n=w.options._levelNumber||0;(d=this.drilldownLevels[this.drilldownLevels.length-1])&&d.levelNumber!==n&&(d=void 0);x=s(s({_ddSeriesId:i++},k),x);q=l(y,w.points);J(w.chart.series,function(m){m.xAxis!==t||m.isDrilling||(m.options._ddSeriesId=m.options._ddSeriesId||i++,m.options._colorIndex=m.userOptions._colorIndex,m.options._levelNumber=m.options._levelNumber||n,d?(p=d.levelSeries,z=d.levelSeriesOptions):(p.push(m),z.push(m.options)))});y=s({levelNumber:n,seriesOptions:w.options,levelSeriesOptions:z,levelSeries:p,shapeArgs:y.shapeArgs,bBox:y.graphic?y.graphic.getBBox():{},color:y.isNull?(new K.Color(c)).setOpacity(0).get():c,lowerSeriesOptions:x,pointOptions:w.options.data[q],pointIndex:q,oldExtremes:{xMin:t&&t.userMin,xMax:t&&t.userMax,yMin:u&&u.userMin,yMax:u&&u.userMax},resetZoomButton:this.resetZoomButton},k);this.drilldownLevels.push(y);t&&t.names&&(t.names.length=0);x=y.lowerSeries=this.addSeries(x,!1);x.options._levelNumber=n+1;t&&(t.oldPos=t.pos,t.userMin=t.userMax=null,u.userMin=u.userMax=null);w.type===x.type&&(x.animate=x.animateDrilldown||e,x.options.animation=!0)};I.prototype.applyDrilldown=function(){var k=this.drilldownLevels,d;k&&0<k.length&&(d=k[k.length-1].levelNumber,J(this.drilldownLevels,function(m){m.levelNumber===d&&J(m.levelSeries,function(n){n.options&&n.options._levelNumber===d&&n.remove(!1)})}));this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton);this.pointer.reset();this.redraw();this.showDrillUpButton()};I.prototype.getDrilldownBackText=function(){var d=this.drilldownLevels;if(d&&0<d.length){return d=d[d.length-1],d.series=d.seriesOptions,g(this.options.lang.drillUpText,d)}};I.prototype.showDrillUpButton=function(){var k=this,d=this.getDrilldownBackText(),p=k.options.drilldown.drillUpButton,m,n;this.drillUpButton?this.drillUpButton.attr({text:d}).align():(n=(m=p.theme)&&m.states,this.drillUpButton=this.renderer.button(d,null,null,function(){k.drillUp()},m,n&&n.hover,n&&n.select).addClass("highcharts-drillup-button").attr({align:p.position.align,zIndex:7}).add().align(p.position,!1,p.relativeTo||"plotBox"))};I.prototype.drillUp=function(){if(this.drilldownLevels&&0!==this.drilldownLevels.length){for(var z=this,y=z.drilldownLevels,x=y[y.length-1].levelNumber,t=y.length,u=z.series,q,p,w,n,k=function(d){var m;J(u,function(A){A.options._ddSeriesId===d._ddSeriesId&&(m=A)});m=m||z.addSeries(d,!1);m.type===w.type&&m.animateDrillupTo&&(m.animate=m.animateDrillupTo);d===p.seriesOptions&&(n=m)};t--;){if(p=y[t],p.levelNumber===x){y.pop();w=p.lowerSeries;if(!w.chart){for(q=u.length;q--;){if(u[q].options.id===p.lowerSeriesOptions.id&&u[q].options._levelNumber===x+1){w=u[q];break}}}w.xData=[];J(p.levelSeriesOptions,k);h(z,"drillup",{seriesOptions:p.seriesOptions});n.type===w.type&&(n.drilldownLevel=p,n.options.animation=z.options.drilldown.animation,w.animateDrillupFrom&&w.chart&&w.animateDrillupFrom(p));n.options._levelNumber=x;w.remove(!1);n.xAxis&&(q=p.oldExtremes,n.xAxis.setExtremes(q.xMin,q.xMax,!1),n.yAxis.setExtremes(q.yMin,q.yMax,!1));p.resetZoomButton&&(z.resetZoomButton=p.resetZoomButton,z.resetZoomButton.show())}}h(z,"drillupall");this.redraw();0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align();this.ddDupes.length=[]}};I.prototype.callbacks.push(function(){var d=this;d.drilldown={update:function(k,m){K.merge(!0,d.options.drilldown,k);j(m,!0)&&d.redraw()}}});K.addEvent(I,"beforeShowResetZoom",function(){if(this.drillUpButton){return !1}});K.addEvent(I,"render",function(){J(this.xAxis||[],function(d){d.ddPoints={};J(d.series,function(k){var q,m=k.xData||[],n=k.points,p;for(q=0;q<m.length;q++){p=k.options.data[q],"number"!==typeof p&&(p=k.pointClass.prototype.optionsToObject.call({series:k},p),p.drilldown&&(d.ddPoints[m[q]]||(d.ddPoints[m[q]]=[]),d.ddPoints[m[q]].push(n?n[q]:!0)))}});v(d.ticks,o.prototype.drillable)})});H.prototype.animateDrillupTo=function(k){if(!k){var d=this,m=d.drilldownLevel;J(this.points,function(p){var n=p.dataLabel;p.graphic&&p.graphic.hide();n&&(n.hidden="hidden"===n.attr("visibility"),n.hidden||(n.hide(),p.connector&&p.connector.hide()))});K.syncTimeout(function(){d.points&&J(d.points,function(p,n){n=n===(m&&m.pointIndex)?"show":"fadeIn";var t="show"===n?!0:void 0,q=p.dataLabel;if(p.graphic){p.graphic[n](t)}q&&!q.hidden&&(q.fadeIn(),p.connector&&p.connector.fadeIn())})},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=e}};H.prototype.animateDrilldown=function(m){var k=this,t=this.chart.drilldownLevels,q,p=G(this.chart.options.drilldown.animation),n=this.xAxis;m||(J(t,function(d){k.options._ddSeriesId===d.lowerSeriesOptions._ddSeriesId&&(q=d.shapeArgs)}),q.x+=j(n.oldPos,n.pos)-n.pos,J(this.points,function(d){d.graphic&&d.graphic.attr(q).animate(s(d.shapeArgs,{fill:d.color||k.color}),p);d.dataLabel&&d.dataLabel.fadeIn(p)}),this.animate=null)};H.prototype.animateDrillupFrom=function(k){var d=G(this.chart.options.drilldown.animation),p=this.group,m=p!==this.chart.columnGroup,n=this;J(n.trackerGroups,function(q){if(n[q]){n[q].on("mouseover")}});m&&delete this.group;J(this.points,function(w){var u=w.graphic,t=k.shapeArgs,q=function(){u.destroy();p&&m&&(p=p.destroy())};u&&(delete w.graphic,d.duration?u.animate(t,K.merge(d,{complete:q})):(u.attr(t),q()))})};r&&s(r.prototype,{animateDrillupTo:H.prototype.animateDrillupTo,animateDrillupFrom:H.prototype.animateDrillupFrom,animateDrilldown:function(k){var d=this.chart.options.drilldown.animation,p=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1].shapeArgs,m=p.start,n=(p.end-m)/this.points.length;k||(J(this.points,function(q,t){var u=q.shapeArgs;if(q.graphic){q.graphic.attr(K.merge(p,{start:m+t*n,end:m+(t+1)*n}))[d?"animate":"attr"](u,d)}}),this.animate=null)}});K.Point.prototype.doDrilldown=function(m,k,u){var t=this.series.chart,q=t.options.drilldown,p=(q.series||[]).length,n;t.ddDupes||(t.ddDupes=[]);for(;p--&&!n;){q.series[p].id===this.drilldown&&-1===l(this.drilldown,t.ddDupes)&&(n=q.series[p],t.ddDupes.push(this.drilldown))}h(t,"drilldown",{point:this,seriesOptions:n,category:k,originalEvent:u,points:void 0!==k&&this.series.xAxis.getDDPoints(k).slice(0)},function(w){var y=w.point.series&&w.point.series.chart,x=w.seriesOptions;y&&x&&(m?y.addSingleSeriesAsDrilldown(w.point,x):y.addSeriesAsDrilldown(w.point,x))})};K.Axis.prototype.drilldownCategory=function(k,d){v(this.getDDPoints(k),function(m){m&&m.series&&m.series.visible&&m.doDrilldown&&m.doDrilldown(!0,k,d)});this.chart.applyDrilldown()};K.Axis.prototype.getDDPoints=function(d){return this.ddPoints&&this.ddPoints[d]};o.prototype.drillable=function(){var m=this.pos,k=this.label,q=this.axis,p="xAxis"===q.coll&&q.getDDPoints,n=p&&q.getDDPoints(m);p&&(k&&n&&n.length?(k.drillable=!0,k.addClass("highcharts-drilldown-axis-label").on("click",function(d){q.drilldownCategory(m,d)})):k&&k.drillable&&(k.on("click",null),k.removeClass("highcharts-drilldown-axis-label")))};K.addEvent(K.Point,"afterInit",function(){var k=this,d=k.series;k.drilldown&&K.addEvent(k,"click",function(m){d.xAxis&&!1===d.chart.options.drilldown.allowPointDrilldown?d.xAxis.drilldownCategory(k.x,m):k.doDrilldown(void 0,void 0,m)});return k});K.addEvent(K.Series,"afterDrawDataLabels",function(){J(this.points,function(k){var d=k.options.dataLabels,m=j(k.dlOptions,d&&d.style,{});k.drilldown&&k.dataLabel&&(d&&d.color&&(m.color=d.color),k.dataLabel.addClass("highcharts-drilldown-data-label"))},this)});var f=function(k,d,m){k[m?"addClass":"removeClass"]("highcharts-drilldown-point")};K.addEvent(K.Series,"afterDrawTracker",function(){J(this.points,function(d){d.drilldown&&d.graphic&&f(d.graphic,"pointer",!0)})});K.addEvent(K.Point,"afterSetState",function(){this.drilldown&&this.series.halo&&"hover"===this.state?f(this.series.halo,"pointer",!0):this.series.halo&&f(this.series.halo,"auto",!1)})})(a)});