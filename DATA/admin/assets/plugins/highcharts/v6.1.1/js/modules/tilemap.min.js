(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(e){var c=e.defined,b=e.each,f=e.noop;e.colorPointMixin={isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value},setVisible:function(i){var h=this,g=i?"show":"hide";b(["graphic","dataLabel"],function(d){if(h[d]){h[d][g]()}})},setState:function(d){e.Point.prototype.setState.call(this,d);this.graphic&&this.graphic.attr({zIndex:"hover"===d?1:0})}};e.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:f,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var j=this,i=this.options.nullColor,h=this.colorAxis,g=this.colorKey;b(this.data,function(d){var k=d[g];if(k=d.options.color||(d.isNull?i:h&&void 0!==k?h.toColor(k,d):d.color||j.color)){d.color=k}})},colorAttribs:function(h){var g={};c(h.color)&&(g[this.colorProp||"fill"]=h.color);return g}}})(a);(function(i){var f=i.colorPointMixin,n=i.each,k=i.merge,c=i.noop,h=i.pick,m=i.Series,l=i.seriesType,j=i.seriesTypes;l("heatmap","scatter",{animation:!1,borderWidth:0,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}\x3cbr/\x3e"},states:{hover:{halo:!1,brightness:0.2}}},k(i.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var b;j.scatter.prototype.init.apply(this,arguments);b=this.options;b.pointRange=h(b.pointRange,b.colsize||1);this.yAxis.axisPointRange=b.rowsize||1},translate:function(){var g=this.options,o=this.xAxis,q=this.yAxis,e=g.pointPadding||0,p=function(d,r,s){return Math.min(Math.max(r,d),s)};this.generatePoints();n(this.points,function(v){var u=(g.colsize||1)/2,s=(g.rowsize||1)/2,d=p(Math.round(o.len-o.translate(v.x-u,0,1,0,1)),-o.len,2*o.len),u=p(Math.round(o.len-o.translate(v.x+u,0,1,0,1)),-o.len,2*o.len),r=p(Math.round(q.translate(v.y-s,0,1,0,1)),-q.len,2*q.len),s=p(Math.round(q.translate(v.y+s,0,1,0,1)),-q.len,2*q.len),b=h(v.pointPadding,e);v.plotX=v.clientX=(d+u)/2;v.plotY=(r+s)/2;v.shapeType="rect";v.shapeArgs={x:Math.min(d,u)+b,y:Math.min(r,s)+b,width:Math.abs(u-d)-2*b,height:Math.abs(s-r)-2*b}});this.translateColors()},drawPoints:function(){j.column.prototype.drawPoints.call(this);n(this.points,function(d){d.graphic.css(this.colorAttribs(d))},this)},animate:c,getBox:c,drawLegendSymbol:i.LegendSymbolMixin.drawRectangle,alignDataLabel:j.column.prototype.alignDataLabel,getExtremes:function(){m.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;m.prototype.getExtremes.call(this)}}),i.extend({haloPath:function(d){if(!d){return[]}var e=this.shapeArgs;return["M",e.x-d,e.y-d,"L",e.x-d,e.y+e.height+d,e.x+e.width+d,e.y+e.height+d,e.x+e.width+d,e.y-d,"Z"]}},f))})(a);(function(j){var h=j.seriesType,c=j.each,k=j.reduce,f=j.pick,i=function(e,d,g){return Math.min(Math.max(d,e),g)},b=function(e,d,g){e=e.options;return{xPad:(e.colsize||1)/-d,yPad:(e.rowsize||1)/-g}};j.tileShapeTypes={hexagon:{alignDataLabel:j.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(d){return b(d,3,2)},haloPath:function(e){if(!e){return[]}var d=this.tileEdges;return["M",d.x2-e,d.y1+e,"L",d.x3+e,d.y1+e,d.x4+1.5*e,d.y2,d.x3+e,d.y3-e,d.x2-e,d.y3-e,d.x1-1.5*e,d.y2,"Z"]},translate:function(){var l=this.options,g=this.xAxis,p=this.yAxis,o=l.pointPadding||0,n=(l.colsize||1)/3,e=(l.rowsize||1)/2,m;this.generatePoints();c(this.points,function(A){var z=i(Math.floor(g.len-g.translate(A.x-2*n,0,1,0,1)),-g.len,2*g.len),B=i(Math.floor(g.len-g.translate(A.x-n,0,1,0,1)),-g.len,2*g.len),w=i(Math.floor(g.len-g.translate(A.x+n,0,1,0,1)),-g.len,2*g.len),C=i(Math.floor(g.len-g.translate(A.x+2*n,0,1,0,1)),-g.len,2*g.len),v=i(Math.floor(p.translate(A.y-e,0,1,0,1)),-p.len,2*p.len),s=i(Math.floor(p.translate(A.y,0,1,0,1)),-p.len,2*p.len),r=i(Math.floor(p.translate(A.y+e,0,1,0,1)),-p.len,2*p.len),d=f(A.pointPadding,o),x=d*Math.abs(B-z)/Math.abs(r-s),x=g.reversed?-x:x,y=g.reversed?-d:d,d=p.reversed?-d:d;A.x%2&&(m=m||Math.round(Math.abs(r-v)/2)*(p.reversed?-1:1),v+=m,s+=m,r+=m);A.plotX=A.clientX=(B+w)/2;A.plotY=s;z+=x+y;B+=y;w-=y;C-=x+y;v-=d;r+=d;A.tileEdges={x1:z,x2:B,x3:w,x4:C,y1:v,y2:s,y3:r};A.shapeType="path";A.shapeArgs={d:["M",B,v,"L",w,v,C,s,w,r,B,r,z,s,"Z"]}});this.translateColors()}},diamond:{alignDataLabel:j.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(d){return b(d,2,2)},haloPath:function(e){if(!e){return[]}var d=this.tileEdges;return["M",d.x2,d.y1+e,"L",d.x3+e,d.y2,d.x2,d.y3-e,d.x1-e,d.y2,"Z"]},translate:function(){var m=this.options,l=this.xAxis,q=this.yAxis,p=m.pointPadding||0,o=m.colsize||1,e=(m.rowsize||1)/2,n;this.generatePoints();c(this.points,function(x){var v=i(Math.round(l.len-l.translate(x.x-o,0,1,0,0)),-l.len,2*l.len),w=i(Math.round(l.len-l.translate(x.x,0,1,0,0)),-l.len,2*l.len),u=i(Math.round(l.len-l.translate(x.x+o,0,1,0,0)),-l.len,2*l.len),y=i(Math.round(q.translate(x.y-e,0,1,0,0)),-q.len,2*q.len),s=i(Math.round(q.translate(x.y,0,1,0,0)),-q.len,2*q.len),r=i(Math.round(q.translate(x.y+e,0,1,0,0)),-q.len,2*q.len),g=f(x.pointPadding,p),d=g*Math.abs(w-v)/Math.abs(r-s),d=l.reversed?-d:d,g=q.reversed?-g:g;x.x%2&&(n=Math.abs(r-y)/2*(q.reversed?-1:1),y+=n,s+=n,r+=n);x.plotX=x.clientX=w;x.plotY=s;v+=d;u-=d;y-=g;r+=g;x.tileEdges={x1:v,x2:w,x3:u,y1:y,y2:s,y3:r};x.shapeType="path";x.shapeArgs={d:["M",w,y,"L",u,s,w,r,v,s,"Z"]}});this.translateColors()}},circle:{alignDataLabel:j.seriesTypes.scatter.prototype.alignDataLabel,getSeriesPadding:function(d){return b(d,2,2)},haloPath:function(d){return j.seriesTypes.scatter.prototype.pointClass.prototype.haloPath.call(this,d+(d&&this.radius))},translate:function(){var v=this.options,t=this.xAxis,s=this.yAxis,q=v.pointPadding||0,o=(v.rowsize||1)/2,w=v.colsize||1,n,p,e,y,m=!1;this.generatePoints();c(this.points,function(d){var g=i(Math.round(t.len-t.translate(d.x,0,1,0,0)),-t.len,2*t.len),u=i(Math.round(s.translate(d.y,0,1,0,0)),-s.len,2*s.len),r=q,l=!1;void 0!==d.pointPadding&&(r=d.pointPadding,m=l=!0);if(!y||m){n=Math.abs(i(Math.floor(t.len-t.translate(d.x+w,0,1,0,0)),-t.len,2*t.len)-g),p=Math.abs(i(Math.floor(s.translate(d.y+o,0,1,0,0)),-s.len,2*s.len)-u),e=Math.floor(Math.sqrt(n*n+p*p)/2),y=Math.min(n,e,p)-r,m&&!l&&(m=!1)}d.x%2&&(u+=p*(s.reversed?-1:1));d.plotX=d.clientX=g;d.plotY=u;d.radius=y;d.shapeType="circle";d.shapeArgs={x:g,y:u,r:y}});this.translateColors()}},square:{alignDataLabel:j.seriesTypes.heatmap.prototype.alignDataLabel,translate:j.seriesTypes.heatmap.prototype.translate,getSeriesPadding:function(){},haloPath:j.seriesTypes.heatmap.prototype.pointClass.prototype.haloPath}};j.wrap(j.Axis.prototype,"setAxisTranslation",function(g){g.apply(this,Array.prototype.slice.call(arguments,1));var d=this,m=k(j.map(d.series,function(e){return e.getSeriesPixelPadding&&e.getSeriesPixelPadding(d)}),function(n,e){return(n&&n.padding)>(e&&e.padding)?n:e},void 0)||{padding:0,axisLengthFactor:1},l=Math.round(m.padding*m.axisLengthFactor);m.padding&&(d.len-=l,g.apply(d,Array.prototype.slice.call(arguments,1)),d.minPixelPadding+=m.padding,d.len+=l)});h("tilemap","heatmap",{states:{hover:{halo:{enabled:!0,size:2,opacity:0.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"},{setOptions:function(){var d=j.seriesTypes.heatmap.prototype.setOptions.apply(this,Array.prototype.slice.call(arguments));this.tileShape=j.tileShapeTypes[d.tileShape];return d},alignDataLabel:function(){return this.tileShape.alignDataLabel.apply(this,Array.prototype.slice.call(arguments))},getSeriesPixelPadding:function(g){var e=g.isXAxis,m=this.tileShape.getSeriesPadding(this),l;if(!m){return{padding:0,axisLengthFactor:1}}l=Math.round(g.translate(e?2*m.xPad:m.yPad,0,1,0,1));g=Math.round(g.translate(e?m.xPad:0,0,1,0,1));return{padding:Math.abs(l-g)||0,axisLengthFactor:e?2:1.1}},translate:function(){return this.tileShape.translate.apply(this,Array.prototype.slice.call(arguments))}},j.extend({haloPath:function(){return this.series.tileShape.haloPath.apply(this,Array.prototype.slice.call(arguments))}},j.colorPointMixin))})(a)});