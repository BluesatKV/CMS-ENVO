(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(g){function d(j,h){j=JSON.stringify(j);var m=j.length||0,n=0,l=0;if(h){h=Math.max(Math.floor(m/500),1);for(var k=0;k<m;k+=h){n+=j.charCodeAt(k)}n&=n}for(;l<m;++l){h=j.charCodeAt(l),n=(n<<5)-n+h,n&=n}return n.toString(16).replace("-","1")}var b=g.wrap,c=g.each,i=g.merge,f=g.pick;g.Point.prototype.calculatePatternDimensions=function(h){if(!h.width||!h.height){var e=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},j=this.shapeArgs;j&&(e.width=j.width||e.width,e.height=j.height||e.height,e.x=j.x||e.x,e.y=j.y||e.y);if(h.image){if(!e.width||!e.height){h._width="defer";h._height="defer";return}h.aspectRatio&&(e.aspectRatio=e.width/e.height,h.aspectRatio>e.aspectRatio?e.aspectWidth=e.height*h.aspectRatio:e.aspectHeight=e.width/h.aspectRatio);h._width=h.width||Math.ceil(e.aspectWidth||e.width);h._height=h.height||Math.ceil(e.aspectHeight||e.height)}h.width||(h._x=h.x||0,h._x+=e.x-Math.round(e.aspectWidth?Math.abs(e.aspectWidth-e.width)/2:0));h.height||(h._y=h.y||0,h._y+=e.y-Math.round(e.aspectHeight?Math.abs(e.aspectHeight-e.height)/2:0))}};g.SVGRenderer.prototype.addPattern=function(w,v){var t;v=g.pick(v,!0);var u=g.animObject(v),s,r=w.width||w._width||32,p=w.height||w._height||32,k=w.color||"#343434",o=w.id,j=this,e=function(h){j.rect(0,0,r,p).attr({fill:h}).add(t)};o||(this.idCounter=this.idCounter||0,o="highcharts-pattern-"+this.idCounter,++this.idCounter);this.defIds=this.defIds||[];if(!(-1<g.inArray(o,this.defIds))){return this.defIds.push(o),t=this.createElement("pattern").attr({id:o,patternUnits:"userSpaceOnUse",width:r,height:p,x:w._x||w.x||0,y:w._y||w.y||0}).add(this.defs),t.id=o,w.path?(s=w.path,s.fill&&e(s.fill),this.createElement("path").attr({d:s.d||s,stroke:s.stroke||k,"stroke-width":s.strokeWidth||2}).add(t),t.color=k):w.image&&(v?this.image(w.image,0,0,r,p,function(){this.animate({opacity:f(w.opacity,1)},u);g.removeEvent(this.element,"load")}).attr({opacity:0}).add(t):this.image(w.image,0,0,r,p).add(t)),w.image&&v||void 0===w.opacity||c(t.element.childNodes,function(h){h.setAttribute("opacity",w.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[o]=t}};b(g.Series.prototype,"getColor",function(h){var e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,h.apply(this,Array.prototype.slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):h.apply(this,Array.prototype.slice.call(arguments,1))});b(g.Series.prototype,"render",function(h){var e=this.chart.isResizing;(this.isDirtyData||e||!this.chart.hasRendered)&&c(this.points||[],function(j){var k=j.options&&j.options.color;k&&k.pattern&&(!e||j.shapeArgs&&j.shapeArgs.width&&j.shapeArgs.height?j.calculatePatternDimensions(k.pattern):(k.pattern._width="defer",k.pattern._height="defer"))});return h.apply(this,Array.prototype.slice.call(arguments,1))});b(g.Point.prototype,"applyOptions",function(h){var e=h.apply(this,Array.prototype.slice.call(arguments,1)),j=e.options.color;j&&j.pattern&&("string"===typeof j.pattern.path&&(j.pattern.path={d:j.pattern.path}),e.color=e.options.color=i(e.series.options.color,j));return e});g.addEvent(g.SVGRenderer,"complexColor",function(h){var e=h.args[0],l=h.args[1];h=h.args[2];var m=e.pattern,k="#343434",j;if(!m){return !0}if(m.image||"string"===typeof m.path||m.path&&m.path.d){j=(j=h.parentNode&&h.parentNode.getAttribute("class"))&&-1<j.indexOf("highcharts-legend");"defer"!==m._width&&"defer"!==m._height||g.Point.prototype.calculatePatternDimensions.call({graphic:{element:h}},m);if(j||!m.id){m=i({},m),m.id="highcharts-pattern-"+d(m)+d(m,!0)}this.addPattern(m,!this.forExport&&g.pick(m.animation,this.globalAnimation,{duration:100}));k="url("+this.url+"#"+m.id+")"}else{k=m.color||k}h.setAttribute(l,k);e.toString=function(){return k};return !1});g.addEvent(g.Chart,"endResize",function(){g.grep(this.renderer.defIds||[],function(e){return e&&e.indexOf&&0===e.indexOf("highcharts-pattern-")}).length&&(c(this.series,function(e){c(e.points,function(h){(h=h.options&&h.options.color)&&h.pattern&&(h.pattern._width="defer",h.pattern._height="defer")})}),this.redraw(!1))});g.addEvent(g.Chart,"redraw",function(){var h=[],e=this.renderer,j=g.grep(e.defIds||[],function(k){return k.indexOf&&0===k.indexOf("highcharts-pattern-")});j.length&&(c(this.renderTo.querySelectorAll('[color^\x3d"url(#"], [fill^\x3d"url(#"], [stroke^\x3d"url(#"]'),function(k){(k=k.getAttribute("fill")||k.getAttribute("color")||k.getAttribute("stroke"))&&h.push(k.substring(k.indexOf("url(#")+5).replace(")",""))}),c(j,function(k){-1===g.inArray(k,h)&&(g.erase(e.defIds,k),e.patternElements[k]&&(e.patternElements[k].destroy(),delete e.patternElements[k]))}))});g.Chart.prototype.callbacks.push(function(h){var e=g.getOptions().colors;c("M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11;M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9;M 3 0 L 3 10 M 8 0 L 8 10;M 0 3 L 10 3 M 0 8 L 10 8;M 0 3 L 5 3 L 5 0 M 5 10 L 5 7 L 10 7;M 3 3 L 8 3 L 8 8 L 3 8 Z;M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0;M 10 3 L 5 3 L 5 0 M 5 10 L 5 7 L 0 7;M 2 5 L 5 2 L 8 5 L 5 8 Z;M 0 0 L 5 10 L 10 0".split(";"),function(j,k){h.renderer.addPattern({id:"highcharts-default-pattern-"+k,path:j,color:e[k],width:10,height:10})})})})(a)});