"use strict";(function(a){if(typeof module==="object"&&module.exports){module.exports=a}else{a(Highcharts)}}(function(b){var a=(function(n){var m=n.each,j=n.extend,i=n.isArray,d=function(s){return typeof s==="boolean"},g=function(s){return typeof s==="function"},q=n.isObject,p=n.isNumber,l=n.merge,h=n.pick,k=n.reduce;var f=function f(E,D){var y=D.before,v=D.idRoot,w=D.mapIdToNode,t=w[v],B=(d(D.levelIsConstant)?D.levelIsConstant:true),C=D.points,A=C[E.i],x=A&&A.options||{},u=0,s=[],z;j(E,{levelDynamic:E.level-(B?0:t.level),name:h(A&&A.name,""),visible:(v===E.id||(d(D.visible)?D.visible:false))});if(g(y)){E=y(E,D)}m(E.children,function(H,F){var G=j({},D);j(G,{index:F,siblings:E.children.length,visible:E.visible});H=f(H,G);s.push(H);if(H.visible){u+=H.val}});E.visible=u>0||E.visible;z=h(x.value,u);j(E,{children:s,childrenTotal:u,isLeaf:E.visible&&!u,val:z});return E};var o=function o(C,t){var w=t.index,E=t.mapOptionsToLevel,B=t.parentColor,v=t.parentColorIndex,A=t.series,z=t.colors,x=t.siblings,G=A.points,y,D,s,I,J,F,u;function H(K){var L=s&&s.colorVariation;if(L){if(L.key==="brightness"){return n.color(K).brighten(L.to*(w/x)).get()}}return K}if(C){D=G[C.i];s=E[C.level]||{};y=D&&s.colorByPoint;if(y){J=D.index%(z?z.length:A.chart.options.chart.colorCount);I=z&&z[J]}u=h(D&&D.options.colorIndex,s&&s.colorIndex,J,v,t.colorIndex)}return{color:F,colorIndex:u}};var c=function c(x){var s=null,w,v,t,z,y,u;if(q(x)){s={};z=p(x.from)?x.from:1;u=x.levels;v={};w=q(x.defaults)?x.defaults:{};if(i(u)){v=k(u,function(C,B){var E,D,A;if(q(B)&&p(B.level)){A=l({},B);D=(d(A.levelIsConstant)?A.levelIsConstant:w.levelIsConstant);delete A.levelIsConstant;delete A.level;E=B.level+(D?0:z-1);if(q(C[E])){j(C[E],A)}else{C[E]=A}}return C},{})}y=p(x.to)?x.to:1;for(t=0;t<=y;t++){s[t]=l({},w,q(v[t])?v[t]:{})}}return s};var e=function(u){var s,t;if(q(u)){t=q(u.options)?u.options:{};s=h(u.rootNode,t.rootId,"");if(q(u.userOptions)){u.userOptions.rootId=s}u.rootNode=s}return s};var r={getColor:o,getLevelOptions:c,setTreeValues:f,updateRootId:e};return r}(b));(function(o,c){var d=o.seriesType,y=o.seriesTypes,z=o.map,i=o.merge,x=o.extend,f=o.noop,g=o.each,e=c.getColor,r=c.getLevelOptions,l=o.grep,m=function(A){return typeof A==="boolean"},s=o.isNumber,n=o.isObject,q=o.isString,h=o.pick,k=o.Series,u=o.stableSort,v=o.Color,t=function(C,B,A){A=A||this;o.objectEach(C,function(E,D){B.call(A,E,D,C)})},p=o.reduce,w=function(D,C,A){var B;A=A||this;B=C.call(A,D);if(B!==false){w(B,C,A)}},j=c.updateRootId;d("treemap","scatter",{showInLegend:false,marker:false,colorByPoint:false,dataLabels:{enabled:true,defer:false,verticalAlign:"middle",formatter:function(){return this.point.name||this.point.id},inside:true},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:true,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:false,levelIsConstant:true,drillUpButton:{position:{align:"right",x:-10,y:10}}},{pointArrayMap:["value"],axisTypes:y.heatmap?["xAxis","yAxis","colorAxis"]:["xAxis","yAxis"],directTouch:true,optionalAxis:"colorAxis",getSymbol:f,parallelArrays:["x","y","value","colorValue"],colorKey:"colorValue",translateColors:(y.heatmap&&y.heatmap.prototype.translateColors),colorAttribs:(y.heatmap&&y.heatmap.prototype.colorAttribs),trackerGroups:["group","dataLabelsGroup"],getListOfParents:function(C,B){var A=p(C||[],function(F,G,D){var E=h(G.parent,"");if(F[E]===undefined){F[E]=[]}F[E].push(D);return F},{});t(A,function(D,E,F){if((E!=="")&&(o.inArray(E,B)===-1)){g(D,function(G){F[""].push(G)});delete F[E]}});return A},getTree:function(){var B=this,C=z(this.data,function(D){return D.id}),A=B.getListOfParents(this.data,C);B.nodeMap=[];return B.buildNode("",-1,0,A,null)},init:function(C,A){var B=this;k.prototype.init.call(B,C,A);if(B.options.allowDrillToNode){o.addEvent(B,"click",B.onClickDrillToNode)}},buildNode:function(B,F,A,H,I){var G=this,D=[],J=G.points[F],K=0,E,C;g((H[B]||[]),function(L){C=G.buildNode(G.points[L].id,L,(A+1),H,B);K=Math.max(C.height+1,K);D.push(C)});E={id:B,i:F,children:D,height:K,level:A,parent:I,visible:false};G.nodeMap[E.id]=E;if(J){J.node=E}return E},setTreeValues:function(K){var D=this,J=D.options,F=D.rootNode,G=D.nodeMap,C=G[F],I=(m(J.levelIsConstant)?J.levelIsConstant:true),E=0,A=[],B,H=D.points[K.i];g(K.children,function(L){L=D.setTreeValues(L);A.push(L);if(!L.ignore){E+=L.val}});u(A,function(M,L){return M.sortIndex-L.sortIndex});B=h(H&&H.options.value,E);if(H){H.value=B}x(K,{children:A,childrenTotal:E,ignore:!(h(H&&H.visible,true)&&(B>0)),isLeaf:K.visible&&!E,levelDynamic:K.level-(I?0:C.level),name:h(H&&H.name,""),sortIndex:h(H&&H.sortIndex,-B),val:B});return K},calculateChildrenAreas:function(H,B){var E=this,J=E.options,G=E.mapOptionsToLevel,A=G[H.level+1],F=h((E[A&&A.layoutAlgorithm]&&A.layoutAlgorithm),J.layoutAlgorithm),D=J.alternateStartingDirection,I=[],C;C=l(H.children,function(K){return !K.ignore});if(A&&A.layoutStartingDirection){B.direction=A.layoutStartingDirection==="vertical"?0:1}I=E[F](B,C);g(C,function(M,L){var K=I[L];M.values=i(K,{val:M.childrenTotal,direction:(D?1-B.direction:B.direction)});M.pointValues=i(K,{x:(K.x/E.axisRatio),width:(K.width/E.axisRatio)});if(M.children.length){E.calculateChildrenAreas(M,M.values)}})},setPointValues:function(){var B=this,C=B.xAxis,A=B.yAxis;g(B.points,function(D){var K=D.node,F=K.pointValues,G,E,J,H,I=0;if(F&&K.visible){G=Math.round(C.translate(F.x,0,0,0,1))-I;E=Math.round(C.translate(F.x+F.width,0,0,0,1))-I;J=Math.round(A.translate(F.y,0,0,0,1))-I;H=Math.round(A.translate(F.y+F.height,0,0,0,1))-I;D.shapeType="rect";D.shapeArgs={x:Math.min(G,E),y:Math.min(J,H),width:Math.abs(E-G),height:Math.abs(H-J)};D.plotX=D.shapeArgs.x+(D.shapeArgs.width/2);D.plotY=D.shapeArgs.y+(D.shapeArgs.height/2)}else{delete D.plotX;delete D.plotY}})},setColorRecursive:function(D,C,J,F,H){var E=this,G=E&&E.chart,A=G&&G.options&&G.options.colors,B,I;if(D){B=e(D,{colors:A,index:F,mapOptionsToLevel:E.mapOptionsToLevel,parentColor:C,parentColorIndex:J,series:E,siblings:H});I=E.points[D.i];if(I){I.color=B.color;I.colorIndex=B.colorIndex}g(D.children||[],function(L,K){E.setColorRecursive(L,B.color,B.colorIndex,K,D.children.length)})}},algorithmGroup:function(B,A,D,C){this.height=B;this.width=A;this.plot=C;this.direction=D;this.startDirection=D;this.total=0;this.nW=0;this.lW=0;this.nH=0;this.lH=0;this.elArr=[];this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(E,F){return Math.max((E/F),(F/E))}};this.addElement=function(E){this.lP.total=this.elArr[this.elArr.length-1];this.total=this.total+E;if(this.direction===0){this.lW=this.nW;this.lP.lH=this.lP.total/this.lW;this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH);this.nW=this.total/this.height;this.lP.nH=this.lP.total/this.nW;this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)}else{this.lH=this.nH;this.lP.lW=this.lP.total/this.lH;this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH);this.nH=this.total/this.width;this.lP.nW=this.lP.total/this.nH;this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)}this.elArr.push(E)};this.reset=function(){this.nW=0;this.lW=0;this.elArr=[];this.total=0}},algorithmCalcPoints:function(C,M,L,D){var F,E,G,N,I=L.lW,B=L.lH,K=L.plot,A,J=0,H=L.elArr.length-1;if(M){I=L.nW;B=L.nH}else{A=L.elArr[L.elArr.length-1]}g(L.elArr,function(O){if(M||(J<H)){if(L.direction===0){F=K.x;E=K.y;G=I;N=O/G}else{F=K.x;E=K.y;N=B;G=O/N}D.push({x:F,y:E,width:G,height:N});if(L.direction===0){K.y=K.y+N}else{K.x=K.x+G}}J=J+1});L.reset();if(L.direction===0){L.width=L.width-I}else{L.height=L.height-B}K.y=K.parent.y+(K.parent.height-L.height);K.x=K.parent.x+(K.parent.width-L.width);if(C){L.direction=1-L.direction}if(!M){L.addElement(A)}},algorithmLowAspectRatio:function(A,J,C){var B=[],G=this,E,H={x:J.x,y:J.y,parent:J},I=J.direction,F=0,D=C.length-1,K=new this.algorithmGroup(J.height,J.width,I,H);g(C,function(L){E=(J.width*J.height)*(L.val/J.val);K.addElement(E);if(K.lP.nR>K.lP.lR){G.algorithmCalcPoints(A,false,K,B,H)}if(F===D){G.algorithmCalcPoints(A,true,K,B,H)}F=F+1});return B},algorithmFill:function(A,L,E){var D=[],H,J=L.direction,K=L.x,I=L.y,B=L.width,N=L.height,F,C,G,M;g(E,function(O){H=(L.width*L.height)*(O.val/L.val);F=K;C=I;if(J===0){M=N;G=H/M;B=B-G;K=K+G}else{G=B;M=H/G;N=N-M;I=I+M}D.push({x:F,y:C,width:G,height:M});if(A){J=1-J}});return D},strip:function(B,A){return this.algorithmLowAspectRatio(false,B,A)},squarified:function(B,A){return this.algorithmLowAspectRatio(true,B,A)},sliceAndDice:function(B,A){return this.algorithmFill(true,B,A)},stripes:function(B,A){return this.algorithmFill(false,B,A)},translate:function(){var F=this,E=F.options,B=j(F),C,G,D,A,H;k.prototype.translate.call(F);A=F.tree=F.getTree();C=F.nodeMap[B];F.mapOptionsToLevel=r({from:C.level+1,levels:E.levels,to:A.height,defaults:{levelIsConstant:F.options.levelIsConstant,colorByPoint:E.colorByPoint}});if(B!==""&&(!C||!C.children.length)){F.drillToNode("",false);B=F.rootNode;C=F.nodeMap[B]}w(F.nodeMap[F.rootNode],function(J){var I=false,K=J.parent;J.visible=true;if(K||K===""){I=F.nodeMap[K]}return I});w(F.nodeMap[F.rootNode].children,function(I){var J=false;g(I,function(K){K.visible=true;if(K.children.length){J=(J||[]).concat(K.children)}});return J});F.setTreeValues(A);F.axisRatio=(F.xAxis.len/F.yAxis.len);F.nodeMap[""].pointValues=G={x:0,y:0,width:100,height:100};F.nodeMap[""].values=D=i(G,{width:(G.width*F.axisRatio),direction:(E.layoutStartingDirection==="vertical"?0:1),val:A.val});F.calculateChildrenAreas(A,D);if(F.colorAxis){F.translateColors()}else{if(!E.colorByPoint){F.setColorRecursive(F.tree)}}if(E.allowDrillToNode){H=C.pointValues;F.xAxis.setExtremes(H.x,H.x+H.width,false);F.yAxis.setExtremes(H.y,H.y+H.height,false);F.xAxis.setScale();F.yAxis.setScale()}F.setPointValues()},drawDataLabels:function(){var C=this,A=C.mapOptionsToLevel,D=l(C.points,function(F){return F.node.visible}),B,E;g(D,function(F){E=A[F.node.level];B={style:{}};if(!F.node.isLeaf){B.enabled=false}if(E&&E.dataLabels){B=i(B,E.dataLabels);C._hasPointLabels=true}if(F.shapeArgs){B.style.width=F.shapeArgs.width;if(F.dataLabel){F.dataLabel.css({width:F.shapeArgs.width+"px"})}}F.dlOptions=i(B,F.options.dataLabels)});k.prototype.drawDataLabels.call(this)},alignDataLabel:function(A){y.column.prototype.alignDataLabel.apply(this,arguments);if(A.dataLabel){A.dataLabel.attr({zIndex:(A.node.zIndex||0)+1})}},drawPoints:function(){var A=this,B=l(A.points,function(C){return C.node.visible});g(B,function(C){var D="level-group-"+C.node.levelDynamic;if(!A[D]){A[D]=A.chart.renderer.g(D).attr({zIndex:1000-C.node.levelDynamic}).add(A.group)}C.group=A[D]});y.column.prototype.drawPoints.call(this);if(this.colorAttribs){g(this.points,function(C){if(C.graphic){C.graphic.css(this.colorAttribs(C))}},this)}if(A.options.allowDrillToNode){g(B,function(C){if(C.graphic){C.drillId=A.options.interactByLeaf?A.drillToByLeaf(C):A.drillToByGroup(C)}})}},onClickDrillToNode:function(D){var C=this,A=D.point,B=A&&A.drillId;if(q(B)){A.setState("");C.drillToNode(B)}},drillToByGroup:function(A){var C=this,B=false;if((A.node.level-C.nodeMap[C.rootNode].level)===1&&!A.node.isLeaf){B=A.id}return B},drillToByLeaf:function(A){var D=this,C=false,B;if((A.node.parent!==D.rootNode)&&(A.node.isLeaf)){B=A.node;while(!C){B=D.nodeMap[B.parent];if(B.parent===D.rootNode){C=B.id}}}return C},drillUp:function(){var A=this,B=A.nodeMap[A.rootNode];if(B&&q(B.parent)){A.drillToNode(B.parent)}},drillToNode:function(E,D){var A=this,C=A.nodeMap,B=C[E];A.idPreviousRoot=A.rootNode;A.rootNode=E;if(E===""){A.drillUpButton=A.drillUpButton.destroy()}else{A.showDrillUpButton((B&&B.name||E))}this.isDirty=true;if(h(D,true)){this.chart.redraw()}},showDrillUpButton:function(C){var D=this,E=(C||"< Back"),F=D.options.drillUpButton,A,B;if(F.text){E=F.text}if(!this.drillUpButton){A=F.theme;B=A&&A.states;this.drillUpButton=this.chart.renderer.button(E,null,null,function(){D.drillUp()},A,B&&B.hover,B&&B.select).addClass("highcharts-drillup-button").attr({align:F.position.align,zIndex:7}).add().align(F.position,false,F.relativeTo||"plotBox")}else{this.drillUpButton.placed=false;this.drillUpButton.attr({text:E}).align()}},buildKDTree:f,drawLegendSymbol:o.LegendSymbolMixin.drawRectangle,getExtremes:function(){k.prototype.getExtremes.call(this,this.colorValueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;k.prototype.getExtremes.call(this)},getExtremesFromAll:true,bindAxes:function(){var A={endOnTick:false,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:false,title:null,tickPositions:[]};k.prototype.bindAxes.call(this);o.extend(this.yAxis.options,A);o.extend(this.xAxis.options,A)},utils:{recursive:w,reduce:p}},{getClassName:function(){var C=o.Point.prototype.getClassName.call(this),B=this.series,A=B.options;if(this.node.level<=B.nodeMap[B.rootNode].level){C+=" highcharts-above-level"}else{if(!this.node.isLeaf&&!h(A.interactByLeaf,!A.allowDrillToNode)){C+=" highcharts-internal-node-interactive"}else{if(!this.node.isLeaf){C+=" highcharts-internal-node"}}}return C},isValid:function(){return this.id||s(this.value)},setState:function(A){o.Point.prototype.setState.call(this,A);if(this.graphic){this.graphic.attr({zIndex:A==="hover"?1:0})}},setVisible:y.pie.prototype.pointClass.prototype.setVisible})}(b,a));return(function(){}())}));