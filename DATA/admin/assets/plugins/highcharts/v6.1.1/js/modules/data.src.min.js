"use strict";(function(a){if(typeof module==="object"&&module.exports){module.exports=a}else{a(Highcharts)}}(function(a){(function(b){b.ajax=function(c){var d=b.merge(true,{url:false,type:"GET",dataType:"json",success:false,error:false,data:false,headers:{}},c),h={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},f=new XMLHttpRequest();function i(j,e){if(d.error){d.error(j,e)}else{}}if(!d.url){return false}f.open(d.type.toUpperCase(),d.url,true);f.setRequestHeader("Content-Type",h[d.dataType]||h.text);b.objectEach(d.headers,function(j,e){f.setRequestHeader(e,j)});f.onreadystatechange=function(){var j;if(f.readyState===4){if(f.status===200){j=f.responseText;if(d.dataType==="json"){try{j=JSON.parse(j)}catch(k){return i(f,k)}}return d.success&&d.success(j)}i(f,f.responseText)}};try{d.data=JSON.stringify(d.data)}catch(g){}f.send(d.data||true)}}(a));(function(c){var d=c.addEvent,f=c.Chart,i=c.win,n=i.document,l=c.each,b=c.objectEach,h=c.pick,q=c.inArray,p=c.isNumber,j=c.merge,g=c.splat,o=c.fireEvent,m=c.some,e;var k=function(t,s,r){this.init(t,s,r)};c.extend(k.prototype,{init:function(t,v,u){var r=t.decimalPoint,s;if(v){this.chartOptions=v}if(u){this.chart=u}if(r!=="."&&r!==","){r=undefined}this.options=t;this.columns=(t.columns||this.rowsToColumns(t.rows)||[]);this.firstRowAsNames=h(t.firstRowAsNames,this.firstRowAsNames,true);this.decimalRegex=(r&&new RegExp("^(-?[0-9]+)"+r+"([0-9]+)$"));this.rawColumns=[];if(this.columns.length){this.dataFound();s=true}if(!s){s=this.fetchLiveData()}if(!s){s=Boolean(this.parseCSV().length)}if(!s){s=Boolean(this.parseTable().length)}if(!s){s=this.parseGoogleSpreadsheet()}if(!s&&t.afterComplete){t.afterComplete()}},getColumnDistribution:function(){var w=this.chartOptions,B=this.options,u=[],t=function(D){return(c.seriesTypes[D||"line"].prototype.pointArrayMap||[0]).length},y=function(D){return c.seriesTypes[D||"line"].prototype.pointArrayMap},z=(w&&w.chart&&w.chart.type),A=[],C=[],v=0,s=((B&&B.seriesMapping)||(w&&w.series&&c.map(w.series,function(){return{x:0}}))||[]),x;l((w&&w.series)||[],function(D){A.push(t(D.type||z))});l(s,function(D){u.push(D.x||0)});if(u.length===0){u.push(0)}l(s,function(F){var E=new e(),I=A[v]||t(z),H=(w&&w.series)||[],G=H[v]||{},D=y(G.type||z)||["y"];E.addColumnReader(F.x,"x");b(F,function(K,J){if(J!=="x"){E.addColumnReader(K,J)}});for(x=0;x<I;x++){if(!E.hasReader(D[x])){E.addColumnReader(undefined,D[x])}}C.push(E);v++});var r=y(z);if(r===undefined){r=["y"]}this.valueCount={global:t(z),xColumns:u,individual:A,seriesBuilders:C,globalPointArrayMap:r}},dataFound:function(){if(this.options.switchRowsAndColumns){this.columns=this.rowsToColumns(this.columns)}this.getColumnDistribution();this.parseTypes();if(this.parsed()!==false){this.complete()}},parseCSV:function(x){var G=this,y=x||this.options,C=y.csv,u,r=(typeof y.startRow!=="undefined"&&y.startRow?y.startRow:0),I=y.endRow||Number.MAX_VALUE,z=(typeof y.startColumn!=="undefined"&&y.startColumn)?y.startColumn:0,w=y.endColumn||Number.MAX_VALUE,H,s,t=0,v=[],B={",":0,";":0,"\t":0};u=this.columns=[];function J(K,P,Q,S){var O=0,U="",W="",V="",N="",X=0,M=0;function L(Y){U=K[Y];W=K[Y-1];V=K[Y+1]}function R(Y){if(v.length<M+1){v.push([Y])}if(v[M][v[M].length-1]!==Y){v[M].push(Y)}}function T(){if(z>X||X>w){++X;N="";return}if(!isNaN(parseFloat(N))&&isFinite(N)){N=parseFloat(N);R("number")}else{if(!isNaN(Date.parse(N))){N=N.replace(/\//g,"-");R("date")}else{R("string")}}if(u.length<M+1){u.push([])}if(!Q){u[M][P]=N}N="";++M;++X}if(!K.trim().length){return}if(K.trim()[0]==="#"){return}for(;O<K.length;O++){L(O);if(U==="#"){T();return}else{if(U==='"'){L(++O);while(O<K.length){if(U==='"'&&W!=='"'&&V!=='"'){break}if(U!=='"'||(U==='"'&&W!=='"')){N+=U}L(++O)}}else{if(S&&S[U]){if(S[U](U,N)){T()}}else{if(U===H){T()}else{N+=U}}}}}T()}function D(K){var N=0,M=0,L=false;m(K,function(S,R){var T=false,V,U,O,Q="";if(R>13){return true}for(var P=0;P<S.length;P++){V=S[P];U=S[P+1];O=S[P-1];if(V==="#"){return}else{if(V==='"'){if(T){if(O!=='"'&&U!=='"'){while(U===" "&&P<S.length){U=S[++P]}if(typeof B[U]!=="undefined"){B[U]++}T=false}}else{T=true}}else{if(typeof B[V]!=="undefined"){Q=Q.trim();if(!isNaN(Date.parse(Q))){B[V]++}else{if(isNaN(Q)||!isFinite(Q)){B[V]++}}Q=""}else{Q+=V}}}if(V===","){M++}if(V==="."){N++}}});if(B[";"]>B[","]){L=";"}else{if(B[","]>B[";"]){L=","}else{L=","}}if(!y.decimalPoint){if(N>M){y.decimalPoint="."}else{y.decimalPoint=","}G.decimalRegex=new RegExp("^(-?[0-9]+)"+y.decimalPoint+"([0-9]+)$")}return L}function E(O,L){var S="YYYY/mm/dd",U,T,Q,P=0,N=false,K=[],R=[],M;if(!L||L>O.length){L=O.length}for(;P<L;P++){if(typeof O[P]!=="undefined"&&O[P]&&O[P].length){U=O[P].trim().replace(/\//g," ").replace(/\-/g," ").split(" ");T=["","",""];for(M=0;M<U.length;M++){if(M<T.length){U[M]=parseInt(U[M],10);if(U[M]){R[M]=(!R[M]||R[M]<U[M])?U[M]:R[M];if(typeof K[M]!=="undefined"){if(K[M]!==U[M]){K[M]=false}}else{K[M]=U[M]}if(U[M]>31){if(U[M]<100){T[M]="YY"}else{T[M]="YYYY"}}else{if(U[M]>12&&U[M]<=31){T[M]="dd";N=true}else{if(!T[M].length){T[M]="mm"}}}}}}}}if(N){for(M=0;M<K.length;M++){if(K[M]!==false){if(R[M]>12&&T[M]!=="YY"&&T[M]!=="YYYY"){T[M]="YY"}}else{if(R[M]>12&&T[M]==="mm"){T[M]="dd"}}}if(T.length===3&&T[1]==="dd"&&T[2]==="dd"){T[2]="YY"}Q=T.join("/");if(!(y.dateFormats||G.dateFormats)[Q]){o("deduceDateFailed");return S}return Q}return S}function F(){}if(C&&y.beforeParse){C=y.beforeParse.call(this,C)}if(C){s=C.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(y.lineDelimiter||"\n");if(!r||r<0){r=0}if(!I||I>=s.length){I=s.length-1}if(y.itemDelimiter){H=y.itemDelimiter}else{H=null;H=D(s)}var A=0;for(t=r;t<=I;t++){if(s[t][0]==="#"){A++}else{J(s[t],t-r-A)}}F();if((!y.columnTypes||y.columnTypes.length===0)&&v.length&&v[0].length&&v[0][1]==="date"&&!y.dateFormat){y.dateFormat=E(u[0])}this.dataFound()}return u},parseTable:function(){var t=this.options,w=t.table,u=this.columns,s=t.startRow||0,r=t.endRow||Number.MAX_VALUE,v=t.startColumn||0,x=t.endColumn||Number.MAX_VALUE;if(w){if(typeof w==="string"){w=n.getElementById(w)}l(w.getElementsByTagName("tr"),function(z,y){if(y>=s&&y<=r){l(z.children,function(B,A){if((B.tagName==="TD"||B.tagName==="TH")&&A>=v&&A<=x){if(!u[A-v]){u[A-v]=[]}u[A-v][y-s]=B.innerHTML}})}});this.dataFound()}return u},fetchLiveData:function(){var v=this.chart,u=this.options,y=3,r=0,w=u.enablePolling,s=(u.dataRefreshRate||2)*1000,x=j(u);if(!u||(!u.csvURL&&!u.rowsURL&&!u.columnsURL)){return false}if(s<1000){s=1000}delete u.csvURL;delete u.rowsURL;delete u.columnsURL;function t(A){function z(C,B,E){if(!C||C.indexOf("http")!==0){if(C&&u.error){u.error("Invalid URL")}return false}if(A){clearTimeout(v.liveDataTimeout);v.liveDataURL=C}function D(){if(w&&v.liveDataURL===C){v.liveDataTimeout=setTimeout(t,s)}}c.ajax({url:C,dataType:E||"json",success:function(F){if(v&&v.series){B(F)}D()},error:function(G,F){if(++r<y){D()}return u.error&&u.error(F,G)}});return true}if(!z(x.csvURL,function(B){v.update({data:{csv:B}})},"text")){if(!z(x.rowsURL,function(B){v.update({data:{rows:B}})})){z(x.columnsURL,function(B){v.update({data:{columns:B}})})}}}t(true);return(u&&(u.csvURL||u.rowsURL||u.columnsURL))},parseGoogleSpreadsheet:function(){var v=this,B=this.options,r=B.googleSpreadsheetKey,x=this.chart,y=B.googleSpreadsheetWorksheet||1,z=B.startRow||0,u=B.endRow||Number.MAX_VALUE,s=B.startColumn||0,w=B.endColumn||Number.MAX_VALUE,t=(B.dataRefreshRate||2)*1000;if(t<4000){t=4000}function A(D){var C=["https://spreadsheets.google.com/feeds/cells",r,y,"public/values?alt=json"].join("/");c.ajax({url:C,dataType:"json",success:function(E){D(E);if(B.enablePolling){setTimeout(function(){A(D)},B.dataRefreshRate)}},error:function(F,E){return B.error&&B.error(E,F)}})}if(r){delete B.googleSpreadsheetKey;A(function(M){var F=[],N=M.feed.entry,L,H=(N||[]).length,K=0,I=0,E,D,J,C,G;if(!N||N.length===0){return false}for(G=0;G<H;G++){L=N[G];K=Math.max(K,L.gs$cell.col);I=Math.max(I,L.gs$cell.row)}for(G=0;G<K;G++){if(G>=s&&G<=w){F[G-s]=[]}}for(G=0;G<H;G++){L=N[G];D=L.gs$cell.row-1;J=L.gs$cell.col-1;if(J>=s&&J<=w&&D>=z&&D<=u){C=L.gs$cell||L.content;E=null;if(C.numericValue){if(C.$t.indexOf("/")>=0||C.$t.indexOf("-")>=0){E=C.$t}else{if(C.$t.indexOf("%")>0){E=parseFloat(C.numericValue)*100}else{E=parseFloat(C.numericValue)}}}else{if(C.$t&&C.$t.length){E=C.$t}}F[J-s][D-z]=E}}l(F,function(O){for(G=0;G<O.length;G++){if(O[G]===undefined){O[G]=null}}});if(x&&x.series){x.update({data:{columns:F}})}else{v.columns=F;v.dataFound()}})}return false},trim:function(s,r){if(typeof s==="string"){s=s.replace(/^\s+|\s+$/g,"");if(r&&/^[0-9\s]+$/.test(s)){s=s.replace(/\s/g,"")}if(this.decimalRegex){s=s.replace(this.decimalRegex,"$1.$2")}}return s},parseTypes:function(){var s=this.columns,r=s.length;while(r--){this.parseColumn(s[r],r)}},parseColumn:function(t,v){var z=this.rawColumns,s=this.columns,x=t.length,J,C,G,H,y=this.firstRowAsNames,F=q(v,this.valueCount.xColumns)!==-1,E,u=[],B,D=this.chartOptions,I,r=this.options.columnTypes||[],A=r[v],w=F&&((D&&D.xAxis&&g(D.xAxis)[0].type==="category")||A==="string");if(!z[v]){z[v]=[]}while(x--){J=u[x]||t[x];G=this.trim(J);H=this.trim(J,true);C=parseFloat(H);if(z[v][x]===undefined){z[v][x]=G}if(w||(x===0&&y)){t[x]=""+G}else{if(+H===C){t[x]=C;if(C>365*24*3600*1000&&A!=="float"){t.isDatetime=true}else{t.isNumeric=true}if(t[x+1]!==undefined){I=C>t[x+1]}}else{if(G&&G.length){E=this.parseDate(J)}if(F&&p(E)&&A!=="float"){u[x]=J;t[x]=E;t.isDatetime=true;if(t[x+1]!==undefined){B=E>t[x+1];if(B!==I&&I!==undefined){if(this.alternativeFormat){this.dateFormat=this.alternativeFormat;x=t.length;this.alternativeFormat=this.dateFormats[this.dateFormat].alternative}else{t.unsorted=true}}I=B}}else{t[x]=G===""?null:G;if(x!==0&&(t.isDatetime||t.isNumeric)){t.mixed=true}}}}}if(F&&t.mixed){s[v]=z[v]}if(F&&I&&this.options.sort){for(v=0;v<s.length;v++){s[v].reverse();if(y){s[v].unshift(s[v].pop())}}}},dateFormats:{"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(r){return Date.UTC(+r[1],r[2]-1,+r[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(r){return Date.UTC(+r[3],r[2]-1,+r[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(r){return Date.UTC(+r[3],r[1]-1,+r[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(r){var s=+r[3],t=new Date();if(s>(t.getFullYear()-2000)){s+=1900}else{s+=2000}return Date.UTC(s,r[2]-1,+r[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(r){return Date.UTC(+r[3]+2000,r[1]-1,+r[2])}}},parseDate:function(w){var x=this.options.parseDate,t,u,v,r=this.options.dateFormat||this.dateFormat,s;if(x){t=x(w)}else{if(typeof w==="string"){if(!r){for(u in this.dateFormats){v=this.dateFormats[u];s=w.match(v.regex);if(s){this.dateFormat=r=u;this.alternativeFormat=v.alternative;t=v.parser(s);break}}}else{v=this.dateFormats[r];if(!v){v=this.dateFormats["YYYY/mm/dd"]}s=w.match(v.regex);if(s){t=v.parser(s)}}if(!s){s=Date.parse(w);if(typeof s==="object"&&s!==null&&s.getTime){t=s.getTime()-s.getTimezoneOffset()*60000}else{if(p(s)){t=s-(new Date(s)).getTimezoneOffset()*60000}}}}}return t},rowsToColumns:function(v){var w,t,r,u,s;if(v){s=[];t=v.length;for(w=0;w<t;w++){u=v[w].length;for(r=0;r<u;r++){if(!s[r]){s[r]=[]}s[r][w]=v[w][r]}}}return s},parsed:function(){if(this.options.parsed){return this.options.parsed.call(this,this.columns)}},getFreeIndexes:function(t,r){var w,v,x=[],y=[],u;for(v=0;v<t;v=v+1){x.push(true)}for(w=0;w<r.length;w=w+1){u=r[w].getReferencedColumnIndexes();for(v=0;v<u.length;v=v+1){x[u[v]]=false}}for(v=0;v<x.length;v=v+1){if(x[v]){y.push(v)}}return y},complete:function(){var u=this.columns,v=[],F,H=this.options,A,z,B,y,s,x,w,E=[],C,G,t,D;v.length=u.length;if(H.complete||H.afterComplete){if(this.firstRowAsNames){for(B=0;B<u.length;B++){u[B].name=u[B].shift()}}A=[];G=this.getFreeIndexes(u.length,this.valueCount.seriesBuilders);for(x=0;x<this.valueCount.seriesBuilders.length;x++){C=this.valueCount.seriesBuilders[x];if(C.populateColumns(G)){E.push(C)}}while(G.length>0){C=new e();C.addColumnReader(0,"x");D=q(0,G);if(D!==-1){G.splice(D,1)}for(B=0;B<this.valueCount.global;B++){C.addColumnReader(undefined,this.valueCount.globalPointArrayMap[B])}if(C.populateColumns(G)){E.push(C)}}if(E.length>0&&E[0].readers.length>0){t=u[E[0].readers[0].columnIndex];if(t!==undefined){if(t.isDatetime){F="datetime"}else{if(!t.isNumeric){F="category"}}}}if(F==="category"){for(x=0;x<E.length;x++){C=E[x];for(s=0;s<C.readers.length;s++){if(C.readers[s].configName==="x"){C.readers[s].configName="name"}}}}for(x=0;x<E.length;x++){C=E[x];z=[];for(y=0;y<u[0].length;y++){z[y]=C.read(u,y)}A[x]={data:z};if(C.name){A[x].name=C.name}if(F==="category"){A[x].turboThreshold=0}}w={series:A};if(F){w.xAxis={type:F};if(F==="category"){w.xAxis.uniqueNames=false}}if(H.complete){H.complete(w)}if(H.afterComplete){H.afterComplete(w)}}},update:function(r,t){var s=this.chart;if(r){r.afterComplete=function(u){if(u.xAxis&&s.xAxis[0]&&u.xAxis.type===s.xAxis[0].options.type){delete u.xAxis}s.update(u,t,true)};j(true,this.options,r);this.init(this.options)}}});c.Data=k;c.data=function(r,s){return new k(r,s)};d(f,"init",function(s){var r=this,t=s.args[0],u=s.args[1];if(t&&t.data&&!r.hasDataDef){r.hasDataDef=true;r.data=new k(c.extend(t.data,{afterComplete:function(x){var w,v;if(t.hasOwnProperty("series")){if(typeof t.series==="object"){w=Math.max(t.series.length,x&&x.series?x.series.length:0);while(w--){v=t.series[w]||{};t.series[w]=j(v,x&&x.series?x.series[w]:{})}}else{delete t.series}}t=j(x,t);r.init(t,u)}}),t,r);s.preventDefault()}});e=function(){this.readers=[];this.pointIsArray=true};e.prototype.populateColumns=function(t){var r=this,s=true;l(r.readers,function(u){if(u.columnIndex===undefined){u.columnIndex=t.shift()}});l(r.readers,function(u){if(u.columnIndex===undefined){s=false}});return s};e.prototype.read=function(u,w){var t=this,v=t.pointIsArray,r=v?[]:{},s;l(t.readers,function(x){var y=u[x.columnIndex][w];if(v){r.push(y)}else{if(x.configName.indexOf(".")>0){c.Point.prototype.setNestedProperty(r,y,x.configName)}else{r[x.configName]=y}}});if(this.name===undefined&&t.readers.length>=2){s=t.getReferencedColumnIndexes();if(s.length>=2){s.shift();s.sort();this.name=u[s.shift()].name}}return r};e.prototype.addColumnReader=function(r,s){this.readers.push({columnIndex:r,configName:s});if(!(s==="x"||s==="y"||s===undefined)){this.pointIsArray=false}};e.prototype.getReferencedColumnIndexes=function(){var s,r=[],t;for(s=0;s<this.readers.length;s=s+1){t=this.readers[s];if(t.columnIndex!==undefined){r.push(t.columnIndex)}}return r};e.prototype.hasReader=function(t){var r,s;for(r=0;r<this.readers.length;r=r+1){s=this.readers[r];if(s.configName===t){return true}}}}(a));return(function(){}())}));