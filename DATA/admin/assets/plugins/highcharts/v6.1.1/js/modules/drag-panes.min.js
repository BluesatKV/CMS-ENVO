(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(i){var e=i.hasTouch,l=i.merge,q=i.wrap,d=i.each,j=i.isNumber,g=i.addEvent,p=i.relativeLength,h=i.objectEach,c=i.Axis,o=i.Pointer;l(!0,c.prototype.defaultYAxisOptions,{minLength:"10%",maxLength:"100%",resize:{controlledAxis:{next:[],prev:[]},enabled:!1,x:0,y:0}});i.AxisResizer=function(b){this.init(b)};i.AxisResizer.prototype={init:function(b,f){this.axis=b;this.options=b.options.resize;this.render();f||this.addMouseEvents()},render:function(){var m=this.axis,s=m.chart,r=this.options,f=r.x,n=r.y,r=Math.min(Math.max(m.top+m.height+n,s.plotTop),s.plotTop+s.plotHeight),k={};this.lastPos=r-n;this.controlLine||(this.controlLine=s.renderer.path().addClass("highcharts-axis-resizer"));this.controlLine.add(m.axisGroup);n=this.controlLine.strokeWidth();k.d=s.renderer.crispLine(["M",m.left+f,r,"L",m.left+m.width+f,r],n);this.controlLine.attr(k)},addMouseEvents:function(){var m=this,t=m.controlLine.element,s=m.axis.chart.container,f=[],r,k,n;m.mouseMoveHandler=r=function(b){m.onMouseMove(b)};m.mouseUpHandler=k=function(b){m.onMouseUp(b)};m.mouseDownHandler=n=function(b){m.onMouseDown(b)};f.push(g(s,"mousemove",r),g(s.ownerDocument,"mouseup",k),g(t,"mousedown",n));e&&f.push(g(s,"touchmove",r),g(s.ownerDocument,"touchend",k),g(t,"touchstart",n));m.eventsToUnbind=f},onMouseMove:function(b){b.touches&&0===b.touches[0].pageX||!this.grabbed||(this.hasDragged=!0,this.updateAxes(this.axis.chart.pointer.normalize(b).chartY-this.options.y))},onMouseUp:function(b){this.hasDragged&&this.updateAxes(this.axis.chart.pointer.normalize(b).chartY-this.options.y);this.grabbed=this.hasDragged=this.axis.chart.activeResizer=null},onMouseDown:function(){this.axis.chart.pointer.reset(!1,0);this.grabbed=this.axis.chart.activeResizer=!0},updateAxes:function(A){var z=this,y=z.axis.chart,w=z.options.controlledAxis,x=0===w.next.length?[i.inArray(z.axis,y.yAxis)+1]:w.next,w=[z.axis].concat(w.prev),u=[],s=!1,v=y.plotTop,t=y.plotHeight,b=v+t,m;A=Math.max(Math.min(A,b),v);m=A-z.lastPos;1>m*m||(d([w,x],function(k,n){d(k,function(r,B){var C=(r=j(r)?y.yAxis[r]:n||B?y.get(r):r)&&r.options,D,f;C&&"navigator-y-axis"!==C.id&&(B=r.top,f=Math.round(p(C.minLength,t)),D=Math.round(p(C.maxLength,t)),n?(m=A-z.lastPos,C=Math.round(Math.min(Math.max(r.len-m,f),D)),B=r.top+m,B+C>b&&(D=b-C-B,A+=D,B+=D),B<v&&(B=v,B+C>b&&(C=t)),C===f&&(s=!0),u.push({axis:r,options:{top:Math.round(B),height:C}})):(C=Math.round(Math.min(Math.max(A-B,f),D)),C===D&&(s=!0),A=B+C,u.push({axis:r,options:{height:C}})))})}),s||(d(u,function(f){f.axis.update(f.options,!1)}),y.redraw(!1)))},destroy:function(){var b=this;delete b.axis.resizer;this.eventsToUnbind&&d(this.eventsToUnbind,function(f){f()});b.controlLine.destroy();h(b,function(f,k){b[k]=null})}};c.prototype.keepProps.push("resizer");g(c,"afterRender",function(){var b=this.resizer,f=this.options.resize;f&&(f=!1!==f.enabled,b?f?b.init(this,!0):b.destroy():f&&(this.resizer=new i.AxisResizer(this)))});g(c,"destroy",function(b){!b.keepEvents&&this.resizer&&this.resizer.destroy()});q(o.prototype,"runPointActions",function(b){this.chart.activeResizer||b.apply(this,Array.prototype.slice.call(arguments,1))});q(o.prototype,"drag",function(b){this.chart.activeResizer||b.apply(this,Array.prototype.slice.call(arguments,1))})})(a)});