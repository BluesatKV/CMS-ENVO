(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(y){var B=y.addEvent,o=y.Axis,i=y.Chart,v=y.color,j,r=y.each,C=y.extend,c=y.isNumber,s=y.Legend,g=y.LegendSymbolMixin,z=y.noop,A=y.merge,e=y.pick;y.ColorAxis||(j=y.ColorAxis=function(){this.init.apply(this,arguments)},C(j.prototype,o.prototype),C(j.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:0.01},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0},keepProps:["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"].concat(o.prototype.keepProps),init:function(b,h){var f="vertical"!==b.options.legend.layout,d;this.coll="colorAxis";d=A(this.defaultColorAxisOptions,{side:f?2:1,reversed:!f},h,{opposite:!f,showEmpty:!1,title:null,visible:b.options.legend.enabled});o.prototype.init.call(this,b,d);h.dataClasses&&this.initDataClasses(h);this.initStops();this.horiz=f;this.zoomEnabled=!1;this.defaultLegendLength=200},initDataClasses:function(f){var m,l=0,k=this.chart.options.chart.colorCount,h=this.options,d=f.dataClasses.length;this.dataClasses=m=[];this.legendItems=[];r(f.dataClasses,function(b,n){b=A(b);m.push(b);"category"===h.dataClassColor?(b.colorIndex=l,l++,l===k&&(l=0)):b.color=v(h.minColor).tweenTo(v(h.maxColor),2>d?0.5:n/(d-1))})},setTickPositions:function(){if(!this.dataClasses){return o.prototype.setTickPositions.call(this)}},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]];r(this.stops,function(b){b.color=v(b[1])})},setOptions:function(b){o.prototype.setOptions.call(this,b);this.options.crosshair=this.options.marker},setAxisSize:function(){var f=this.legendSymbol,l=this.chart,k=l.options.legend||{},d,h;f?(this.left=k=f.attr("x"),this.top=d=f.attr("y"),this.width=h=f.attr("width"),this.height=f=f.attr("height"),this.right=l.chartWidth-k-h,this.bottom=l.chartHeight-d-f,this.len=this.horiz?h:f,this.pos=this.horiz?k:d):this.len=(this.horiz?k.symbolWidth:k.symbolHeight)||this.defaultLegendLength},normalizedValue:function(b){this.isLog&&(b=this.val2lin(b));return 1-(this.max-b)/(this.max-this.min||1)},toColor:function(k,u){var p=this.stops,h,l,m=this.dataClasses,t,q;if(m){for(q=m.length;q--;){if(t=m[q],h=t.from,p=t.to,(void 0===h||k>=h)&&(void 0===p||k<=p)){u&&(u.dataClass=q,u.colorIndex=t.colorIndex);break}}}else{k=this.normalizedValue(k);for(q=p.length;q--&&!(k>p[q][0]);){}h=p[q]||p[q+1];p=p[q+1]||h;k=1-(p[0]-k)/(p[0]-h[0]||1);l=h.color.tweenTo(p.color,k)}return l},getOffset:function(){var b=this.legendGroup,d=this.chart.axisOffset[this.side];b&&(this.axisParent=b,o.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=d)},setLegendColor:function(){var b,d=this.reversed;b=d?1:0;d=d?0:1;b=this.horiz?[b,0,d,0]:[0,d,0,b];this.legendColor={linearGradient:{x1:b[0],y1:b[1],x2:b[2],y2:b[3]},stops:this.stops}},drawLegendSymbol:function(k,u){var p=k.padding,h=k.options,l=this.horiz,m=e(h.symbolWidth,l?this.defaultLegendLength:12),q=e(h.symbolHeight,l?12:this.defaultLegendLength),t=e(h.labelPadding,l?16:30),h=e(h.itemDistance,10);this.setLegendColor();u.legendSymbol=this.chart.renderer.rect(0,k.baseline-11,m,q).attr({zIndex:1}).add(u.legendGroup);this.legendItemWidth=m+p+(l?h:t);this.legendItemHeight=q+p+(l?t:0)},setState:function(b){r(this.series,function(d){d.setState(b)})},visible:!0,setVisible:z,getSeriesExtremes:function(){var b=this.series,d=b.length;this.dataMin=Infinity;for(this.dataMax=-Infinity;d--;){b[d].getExtremes(),void 0!==b[d].valueMin&&(this.dataMin=Math.min(this.dataMin,b[d].valueMin),this.dataMax=Math.max(this.dataMax,b[d].valueMax))}},drawCrosshair:function(k,q){var n=q&&q.plotX,h=q&&q.plotY,l,m=this.pos,p=this.len;q&&(l=this.toPixels(q[q.series.colorKey]),l<m?l=m-2:l>m+p&&(l=m+p+2),q.plotX=l,q.plotY=this.len-l,o.prototype.drawCrosshair.call(this,k,q),q.plotX=n,q.plotY=h,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0))},getPlotLinePath:function(h,m,l,d,k){return c(k)?this.horiz?["M",k-4,this.top-6,"L",k+4,this.top-6,k,this.top,"Z"]:["M",this.left,k,"L",this.left-6,k+6,this.left-6,k-6,"Z"]:o.prototype.getPlotLinePath.call(this,h,m,l,d)},update:function(f,k){var h=this.chart,d=h.legend;r(this.series,function(b){b.isDirtyData=!0});f.dataClasses&&d.allItems&&(r(d.allItems,function(b){b.isDataClass&&b.legendGroup&&b.legendGroup.destroy()}),h.isDirtyLegend=!0);h.options[this.coll]=A(this.userOptions,f);o.prototype.update.call(this,f,k);this.legendItem&&(this.setLegendColor(),d.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this);o.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var h=this,t=this.chart,p=this.legendItems,n=t.options.legend,q=n.valueDecimals,m=n.valueSuffix||"",b;p.length||r(this.dataClasses,function(u,k){var l=!0,d=u.from,w=u.to;b="";void 0===d?b="\x3c ":void 0===w&&(b="\x3e ");void 0!==d&&(b+=y.numberFormat(d,q)+m);void 0!==d&&void 0!==w&&(b+=" - ");void 0!==w&&(b+=y.numberFormat(w,q)+m);p.push(C({chart:t,name:b,options:{},drawLegendSymbol:g.drawRectangle,visible:!0,setState:z,isDataClass:!0,setVisible:function(){l=this.visible=!l;r(h.series,function(f){r(f.points,function(x){x.dataClass===k&&x.setVisible(l)})});t.legend.colorizeItem(this,l)}},u))});return p},name:""}),r(["fill","stroke"],function(b){y.Fx.prototype[b+"Setter"]=function(){this.elem.attr(b,v(this.start).tweenTo(v(this.end),this.pos),null,!0)}}),B(i,"afterGetAxes",function(){var b=this.options.colorAxis;this.colorAxis=[];b&&new j(this,b)}),B(s,"afterGetAllItems",function(b){var f=[],d=this.chart.colorAxis[0];d&&d.options&&d.options.showInLegend&&(d.options.dataClasses?f=d.getDataClassLegendSymbols():f.push(d),r(d.series,function(h){y.erase(b.allItems,h)}));for(d=f.length;d--;){b.allItems.unshift(f[d])}}),B(s,"afterColorizeItem",function(b){b.visible&&b.item.legendColor&&b.item.legendSymbol.attr({fill:b.item.legendColor})}),B(s,"afterUpdate",function(f,h,d){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},d)}))})(a);(function(d){var c=d.defined,f=d.each,e=d.noop;d.colorPointMixin={isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value},setVisible:function(g){var j=this,i=g?"show":"hide";f(["graphic","dataLabel"],function(h){if(j[h]){j[h][i]()}})},setState:function(b){d.Point.prototype.setState.call(this,b);this.graphic&&this.graphic.attr({zIndex:"hover"===b?1:0})}};d.colorSeriesMixin={pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:e,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var i=this,j=this.options.nullColor,k=this.colorAxis,g=this.colorKey;f(this.data,function(h){var b=h[g];if(b=h.options.color||(h.isNull?j:k&&void 0!==b?k.toColor(b,h):h.color||i.color)){h.color=b}})},colorAttribs:function(g){var h={};c(g.color)&&(h[this.colorProp||"fill"]=g.color);return h}}})(a);(function(n){var e=n.colorPointMixin,g=n.each,o=n.merge,j=n.noop,f=n.pick,i=n.Series,p=n.seriesType,c=n.seriesTypes;p("heatmap","scatter",{animation:!1,borderWidth:0,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}\x3cbr/\x3e"},states:{hover:{halo:!1,brightness:0.2}}},o(n.colorSeriesMixin,{pointArrayMap:["y","value"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var d;c.scatter.prototype.init.apply(this,arguments);d=this.options;d.pointRange=f(d.pointRange,d.colsize||1);this.yAxis.axisPointRange=d.rowsize||1},translate:function(){var l=this.options,s=this.xAxis,q=this.yAxis,k=l.pointPadding||0,r=function(h,d,m){return Math.min(Math.max(d,h),m)};this.generatePoints();g(this.points,function(b){var u=(l.colsize||1)/2,m=(l.rowsize||1)/2,h=r(Math.round(s.len-s.translate(b.x-u,0,1,0,1)),-s.len,2*s.len),u=r(Math.round(s.len-s.translate(b.x+u,0,1,0,1)),-s.len,2*s.len),d=r(Math.round(q.translate(b.y-m,0,1,0,1)),-q.len,2*q.len),m=r(Math.round(q.translate(b.y+m,0,1,0,1)),-q.len,2*q.len),t=f(b.pointPadding,k);b.plotX=b.clientX=(h+u)/2;b.plotY=(d+m)/2;b.shapeType="rect";b.shapeArgs={x:Math.min(h,u)+t,y:Math.min(d,m)+t,width:Math.abs(u-h)-2*t,height:Math.abs(m-d)-2*t}});this.translateColors()},drawPoints:function(){c.column.prototype.drawPoints.call(this);g(this.points,function(d){d.graphic.css(this.colorAttribs(d))},this)},animate:j,getBox:j,drawLegendSymbol:n.LegendSymbolMixin.drawRectangle,alignDataLabel:c.column.prototype.alignDataLabel,getExtremes:function(){i.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;i.prototype.getExtremes.call(this)}}),n.extend({haloPath:function(h){if(!h){return[]}var k=this.shapeArgs;return["M",k.x-h,k.y-h,"L",k.x-h,k.y+k.height+h,k.x+k.width+h,k.y+k.height+h,k.x+k.width+h,k.y-h,"Z"]}},e))})(a)});