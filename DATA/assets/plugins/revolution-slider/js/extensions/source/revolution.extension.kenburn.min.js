(function(a){var b=jQuery.fn.revolution,c={alias:"KenBurns Min JS",name:"revolution.extensions.kenburn.min.js",min_core:"5.4",version:"1.3.1"};jQuery.extend(true,b,{stopKenBurn:function(d){if(b.compare_version(c).check==="stop"){return false}if(d.data("kbtl")!=undefined){d.data("kbtl").pause()}},startKenBurn:function(v,f,m){if(b.compare_version(c).check==="stop"){return false}var A=v.data(),z=v.find(".defaultimg"),u=z.data("lazyload")||z.data("src"),n=A.owidth/A.oheight,g=f.sliderType==="carousel"?f.carousel.slide_width:f.ul.width(),t=f.ul.height(),e=g/t;if(v.data("kbtl")){v.data("kbtl").kill()}m=m||0;if(v.find(".tp-kbimg").length==0){var r=z.data("mediafilter");r=r===undefined?"":r;v.append('<div class="tp-kbimg-wrap '+r+'" style="z-index:2;width:100%;height:100%;top:0px;left:0px;position:absolute;"><img class="tp-kbimg" src="'+u+'" style="position:absolute;" width="'+A.owidth+'" height="'+A.oheight+'"></div>');v.data("kenburn",v.find(".tp-kbimg"))}var h=function(I,E,G,l,d,K,k){var F=I*G,i=E*G,D=Math.abs(l-F),H=Math.abs(d-i),J=new Object();J.l=(0-K)*D;J.r=J.l+F;J.t=(0-k)*H;J.b=J.t+i;J.h=K;J.v=k;return J},C=function(F,E,i,G,s){var k=F.bgposition.split(" ")||"center center",H=k[0]=="center"?"50%":k[0]=="left"||k[1]=="left"?"0%":k[0]=="right"||k[1]=="right"?"100%":k[0],l=k[1]=="center"?"50%":k[0]=="top"||k[1]=="top"?"0%":k[0]=="bottom"||k[1]=="bottom"?"100%":k[1];H=parseInt(H,0)/100||0;l=parseInt(l,0)/100||0;var D=new Object();D.start=h(s.start.width,s.start.height,s.start.scale,E,i,H,l);D.end=h(s.start.width,s.start.height,s.end.scale,E,i,H,l);return D},q=function(l,F,N){var L=N.scalestart/100,G=N.scaleend/100,K=N.offsetstart!=undefined?N.offsetstart.split(" ")||[0,0]:[0,0],Q=N.offsetend!=undefined?N.offsetend.split(" ")||[0,0]:[0,0];N.bgposition=N.bgposition=="center center"?"50% 50%":N.bgposition;var J=new Object(),I=l*L,P=I/N.owidth*N.oheight,M=l*G,s=M/N.owidth*N.oheight;J.start=new Object();J.starto=new Object();J.end=new Object();J.endo=new Object();J.start.width=l;J.start.height=J.start.width/N.owidth*N.oheight;if(J.start.height<F){var H=F/J.start.height;J.start.height=F;J.start.width=J.start.width*H}J.start.transformOrigin=N.bgposition;J.start.scale=L;J.end.scale=G;N.rotatestart=N.rotatestart===0?0.01:N.rotatestart;J.start.rotation=N.rotatestart+"deg";J.end.rotation=N.rotateend+"deg";var O=C(N,l,F,K,J);K[0]=parseFloat(K[0])+O.start.l;Q[0]=parseFloat(Q[0])+O.end.l;K[1]=parseFloat(K[1])+O.start.t;Q[1]=parseFloat(Q[1])+O.end.t;var k=O.start.r-O.start.l,i=O.start.b-O.start.t,E=O.end.r-O.end.l,D=O.end.b-O.end.t;K[0]=K[0]>0?0:k+K[0]<l?l-k:K[0];Q[0]=Q[0]>0?0:E+Q[0]<l?l-E:Q[0];K[1]=K[1]>0?0:i+K[1]<F?F-i:K[1];Q[1]=Q[1]>0?0:D+Q[1]<F?F-D:Q[1];J.starto.x=K[0]+"px";J.starto.y=K[1]+"px";J.endo.x=Q[0]+"px";J.endo.y=Q[1]+"px";J.end.ease=J.endo.ease=N.ease;J.end.force3D=J.endo.force3D=true;return J};if(v.data("kbtl")!=undefined){v.data("kbtl").kill();v.removeData("kbtl")}var w=v.data("kenburn"),B=w.parent(),x=q(g,t,A),j=new punchgs.TimelineLite();j.pause();x.start.transformOrigin="0% 0%";x.starto.transformOrigin="0% 0%";j.add(punchgs.TweenLite.fromTo(w,A.duration/1000,x.start,x.end),0);j.add(punchgs.TweenLite.fromTo(B,A.duration/1000,x.starto,x.endo),0);if(A.blurstart!==undefined&&A.blurend!==undefined&&(A.blurstart!==0||A.blurend!==0)){var p={a:A.blurstart},y={a:A.blurend,ease:x.endo.ease},o=new punchgs.TweenLite(p,A.duration/1000,y);o.eventCallback("onUpdate",function(d){punchgs.TweenLite.set(d,{filter:"blur("+p.a+"px)",webkitFilter:"blur("+p.a+"px)"})},[B]);j.add(o,0)}j.progress(m);j.play();v.data("kbtl",j)}})})(jQuery);